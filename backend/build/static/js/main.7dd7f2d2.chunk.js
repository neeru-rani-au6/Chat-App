(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{170:function(e,t,a){e.exports=a(232)},228:function(e,t){},231:function(e,t,a){},232:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(13),c=a.n(s),o=a(41),l=a(31),i=a(59),u=a(58),m=a(5),p=a.n(m),d=a(10),f=a(8),g=a(7),h=a(14),b=a(285),E=a(279),v=a(304),y=a(284),x=a(283),O=a(49),j=a(274),w=a(277),k=a(18),N=a(15),S=a(17),R=a.n(S),C=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.prev=1,(r=new FormData).append("firstName",e.firstName),r.append("lastName",e.lastName),r.append("email",e.email),r.append("password",e.password),e.photoURL&&r.append("photoURL",e.photoURL,e.photoURL.name),t.next=10,R()({method:"post",url:"/users/register",data:r,headers:{"content-type":"multipart/form-data",Accept:"application/json",type:"formData"}});case 10:n=t.sent,s=n.data,console.log(s,"1234"),a({type:"REGISTER",payload:{error:null,info:s}}),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(1),console.log("adsfasdf",t.t0.response),a({type:"REGISTER",payload:{error:t.t0.response.data.message,info:null}});case 20:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()},L=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R()({method:"post",url:"/users/login",data:{email:e.email,password:e.password}});case 3:r=t.sent,n=r.data,a({type:"LOGIN",payload:{error:null,user:n,isAuthenticated:!0}}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0.response.data),a({type:"LOGIN",payload:{error:t.t0.response.data.error,info:null,isAuthenticated:!1,user:null}});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},A=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R()({method:"post",url:"/users/forgotpassword",data:{email:e.email}});case 3:r=t.sent,n=r.data,a({type:"FORGOTPASSWORD",payload:{useremail:e.email,info:n.message}}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("errtyu",t.t0.response.data),a({type:"FORGOTPASSWORD",payload:{error:t.t0.response.data.error,info:null}});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},q=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("user",e),t.prev=1,t.next=4,R()({method:"post",url:"/users/Changepassword",data:{resetToken:e.resetToken,password:e.password,email:e.email}});case 4:r=t.sent,n=r.data,console.log("data",n),a({type:"CHANGEPASSWORD",payload:{user:n,error:null}}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0.response.data),a({type:"CHANGEPASSWORD",payload:{error:t.t0.response.data.error,info:null}});case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},U=a(54),T=a.n(U),I=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",background:"#fff",padding:e.spacing(3),boxShadow:"0px 3px 3px -2px rgba(0,0,0,0.2), 0px 3px 4px 0px rgba(0,0,0,0.14), 0px 1px 8px 0px rgba(0,0,0,0.12)"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function G(){var e=I(),t=Object(N.d)((function(e){return e.userState})),a=Object(k.e)(),s=Object(N.c)(),c=Object(r.useState)({email:"",password:"",isSubmitting:!1}),o=Object(h.a)(c,2),l=o[0],i=o[1],u=function(e,t){i(Object(g.a)(Object(g.a)({},l),{},Object(f.a)({},e,t)))},m=function(){var e=Object(d.a)(p.a.mark((function e(r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),i(Object(g.a)(Object(g.a)({},l),{},{isSubmitting:!0})),e.next=4,s(L(l));case 4:i(Object(g.a)(Object(g.a)({},l),{},{isSubmitting:!1})),t.error||a.push("/home");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(w.a,{component:"main",maxWidth:"xs"},n.a.createElement(E.a,null),n.a.createElement("div",{className:e.paper},n.a.createElement(O.a,{component:"h1",variant:"h5"},n.a.createElement("img",{src:T.a,alt:"user",style:{width:"100%"}})),n.a.createElement(O.a,{component:"h1",variant:"h5"},"Sign in"),n.a.createElement("form",{onSubmit:m,className:e.form,noValidate:!0},n.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:l.email,onChange:function(e){return u("email",e.target.value)}}),n.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:l.password,onChange:function(e){return u("password",e.target.value)}}),n.a.createElement(x.a,{item:!0,xs:!0,style:{float:"right"}},n.a.createElement(y.a,{href:"/forgotPassword",variant:"body2"},"Forgot password?")),t.error&&n.a.createElement(x.a,{item:!0,xs:12,className:"error"},n.a.createElement("div",{className:"error"},t.error)),n.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:l.isSubmitting},"Sign In"),n.a.createElement(x.a,{container:!0,justify:"center",className:"mt-2"},n.a.createElement(x.a,{item:!0},"Don't have an account?",n.a.createElement(y.a,{href:"/register",variant:"body2",className:"mt-2"},"Sign Up"))))))}var D=a(286),F=a(145),W=a.n(F),_=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2),background:"#fff",boxShadow:"0px 3px 3px -2px rgba(0,0,0,0.2), 0px 3px 4px 0px rgba(0,0,0,0.14), 0px 1px 8px 0px rgba(0,0,0,0.12)"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function P(){var e=_(),t=Object(N.d)((function(e){return e.userState})),a=Object(k.e)(),s=Object(N.c)(),c=Object(r.useState)({firstName:"",firstNameError:"",lastName:"",lastNameError:"",email:"",emailError:"",password:"",passwordError:"",isSubmitting:!1}),o=Object(h.a)(c,2),l=o[0],i=o[1],u=function(e,t){var a=Object(g.a)({},l);a[e]=t,"firstName"===e&&(a.firstNameError="",a.firstName.match(/^[a-z ,.'-]{3,150}$/i)||(a.firstNameError="firstName is not valid"),""===a.firstName.trim()&&(a.firstNameError="First name is required")),"lastName"===e&&(a.lastNameError="",a.lastName.match(/^[a-z ,.'-]{3,150}$/i)||(a.lastNameError="lastName is not valid"),""===a.lastName.trim()&&(a.lastNameError="Last name is required")),"email"===e&&(a.emailError="",a.email.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i)||(a.emailError="invalid email "),""===a.email.trim()&&(a.emailError="email is required")),"password"===e&&(a.passwordError="",a.password.length<5&&(a.passwordError="Can not be less than 5"),""===a.password.trim()&&(a.passwordError="password is required")),i(a)},m=function(){var e=Object(d.a)(p.a.mark((function e(r){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),""!==(n=Object(g.a)({},l)).firstName.trim()&&!n.firstNameError){e.next=6;break}return n.firstNameError=n.firstNameError||"first name is required",i(n),e.abrupt("return");case 6:if(""!==n.lastName.trim()&&!n.lastNameError){e.next=10;break}return n.lastNameError=n.lastNameError||"last name is required",i(n),e.abrupt("return");case 10:if(""!==n.email.trim()&&!n.emailError){e.next=14;break}return n.emailError=n.emailError||"email is required",i(n),e.abrupt("return");case 14:if(""!==n.password.trim()&&!n.passwordError){e.next=18;break}return n.passwordError=n.passwordError||"password is required",i(n),e.abrupt("return");case 18:return n.isSubmitting=!0,i(n),e.next=22,s(C(l));case 22:n.isSubmitting=!0,i(n),t.error||a.push("/");case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(w.a,{component:"main",maxWidth:"xs"},n.a.createElement(E.a,null),n.a.createElement("div",{className:e.paper},n.a.createElement(O.a,{component:"h1",variant:"h5"},n.a.createElement("img",{src:T.a,alt:"user",style:{width:"100%"}})),n.a.createElement(O.a,{component:"h1",variant:"h5"},"Sign up"),n.a.createElement("form",{onSubmit:m,className:e.form,noValidate:!0},n.a.createElement(x.a,{container:!0,spacing:2},n.a.createElement(x.a,{item:!0,xs:12,sm:6},n.a.createElement(v.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",value:l.firstName,onChange:function(e){return u("firstName",e.target.value)},error:!!l.firstNameError,helperText:l.firstNameError})),n.a.createElement(x.a,{item:!0,xs:12,sm:6},n.a.createElement(v.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname",value:l.lastName,onChange:function(e){return u("lastName",e.target.value)},error:!!l.lastNameError,helperText:l.lastNameError})),n.a.createElement(x.a,{item:!0,xs:12},n.a.createElement(v.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:l.email,onChange:function(e){return u("email",e.target.value)},error:!!l.emailError,helperText:l.emailError})),n.a.createElement(x.a,{item:!0,xs:12},n.a.createElement(v.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:l.password,onChange:function(e){return u("password",e.target.value)},error:!!l.passwordError,helperText:l.passwordError})),n.a.createElement(x.a,null,n.a.createElement("input",{accept:"image/*",className:e.input,id:"icon-button-file",type:"file",onChange:function(e){return u("photoURL",e.target.files[0])}}),n.a.createElement("label",{htmlFor:"icon-button-file"},n.a.createElement(D.a,{color:"primary","aria-label":"upload picture",component:"span"},n.a.createElement(W.a,null)))),t.error&&n.a.createElement(x.a,{item:!0,xs:12},n.a.createElement("div",{className:"error"},t.error))),n.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:l.isSubmitting},"Sign Up"),n.a.createElement(x.a,{container:!0,justify:"center",className:"mt-2"},n.a.createElement(x.a,{item:!0},"Already have an account?",n.a.createElement(y.a,{href:"/",variant:"body2"},"Sign in"))))))}var Q=a(307),M=a(83),z=a.n(M),H=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",background:"#fff",padding:e.spacing(3),boxShadow:"0px 3px 3px -2px rgba(0,0,0,0.2), 0px 3px 4px 0px rgba(0,0,0,0.14), 0px 1px 8px 0px rgba(0,0,0,0.12)"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),B=Object(N.b)((function(e){return{useremail:e.userState}}),{forgotPassword:A})((function(e){var t=H(),a=Object(k.e)(),s=Object(N.c)(),c=Object(r.useState)({email:"",isSubmitting:!1}),o=Object(h.a)(c,2),l=o[0],i=o[1],u=function(){var t=Object(d.a)(p.a.mark((function t(r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("state",l),r.preventDefault(),i(Object(g.a)(Object(g.a)({},l),{},{isSubmitting:!0})),t.next=5,s(A(l));case 5:i(Object(g.a)(Object(g.a)({},l),{},{isSubmitting:!1})),console.log(e.useremail.error),e.useremail.error||a.push("/Resetpassword/"+l.email);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return n.a.createElement(w.a,{component:"main",maxWidth:"xs"},n.a.createElement(E.a,null),n.a.createElement("div",{className:t.paper},n.a.createElement(Q.a,{className:t.avatar},n.a.createElement(z.a,null)),n.a.createElement(O.a,{component:"h1",variant:"h5"},"Forgot Password"),n.a.createElement("form",{className:t.form,noValidate:!0,onSubmit:u},n.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:l.email,onChange:function(e){return t="email",a=e.target.value,void i(Object(g.a)(Object(g.a)({},l),{},Object(f.a)({},t,a)));var t,a}}),n.a.createElement(x.a,null,n.a.createElement("div",{className:"error"},e.useremail.error)),n.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,disabled:l.isSubmitting},"Send Reset Link"),n.a.createElement(x.a,{container:!0},n.a.createElement(x.a,{item:!0,xs:!0}),n.a.createElement(x.a,{item:!0},"Back to",n.a.createElement(y.a,{href:"/",variant:"body2",className:"mt-2"}," Sign in"))))))})),J=a(3),V=a(16),$=a(26),X=a(310),K=a(287),Y=a(288),Z=a(282),ee=a(293),te=a(148),ae=a.n(te),re=a(147),ne=a.n(re),se=a(233),ce=a(294),oe=a(149),le=a.n(oe),ie=a(151),ue=a.n(ie),me=a(150),pe=a.n(me),de=a(155),fe=a(292),ge=a(29),he=a(146),be=a.n(he),Ee=a(309),ve=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R()({method:"post",url:"/group",data:{groupName:e.groupName,photoURL:e.photoURL}});case 3:r=t.sent,n=r.data,a({type:"CREATEGROUP",payload:{error:null,group:n}}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),a({type:"CREATEGROUP",payload:{error:t.t0.response.data.error,group:null}});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},ye=function(){return function(){var e=Object(d.a)(p.a.mark((function e(t){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R()("/group/find");case 3:a=e.sent,r=a.data,t({type:"FINDGROUP",payload:r}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response.data),t({type:"FINDGROUP",payload:{error:e.t0.response.data.error,group:null}});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},xe=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R()({method:"post",url:"/users/search",data:e});case 3:r=t.sent,n=r.data,a({type:"SEARCHUSER",payload:{searchQuery:n}}),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),console.log(t.t0.response.data),a({type:"SEARCHUSER",payload:{error:t.t0.response.data.error,payload:null}});case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},Oe=a(289),je=a(24),we=a.n(je),ke=a(290),Ne=a(291),Se=Object(j.a)((function(e){return{root:{display:"flex",height:"70px"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(f.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(g.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)},menuLogo:{display:"flex",alignItems:"center"},user:{textTransform:"uppercase",background:"#fff",color:"#000",borderRadius:"50%",width:"38px",height:"38px",display:"flex",alignItems:"center",fontSize:"1.3rem"},search:Object(f.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(V.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(V.c)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"500px"},inputInput:Object(f.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width")},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}}),rootclick:{position:"relative"},dropdown:{position:"absolute",top:28,right:0,left:0,zIndex:1,border:"1px solid",padding:e.spacing(1),backgroundColor:"grey",color:"black"}}}));var Re=Object(N.b)((function(e){return{user:e.userState.user,isAuth:e.isAuthenticated,group:e.groupReducer}}),{logout:function(){return function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R()({method:"delete",url:"/users/logout"});case 3:t({type:"LOGOUT",payload:null}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},searchUser:xe})((function(e){var t,a,s=Se(),c=Object($.a)(),o=Object(k.e)(),l=n.a.useState(!1),i=Object(h.a)(l,2),u=i[0],m=i[1],b=n.a.useState(!1),v=Object(h.a)(b,2),y=v[0],j=v[1],w=n.a.useState(null),N=Object(h.a)(w,2),S=N[0],R=N[1],C=Object(r.useState)({searchQuery:"",searchQueryResult:null}),L=Object(h.a)(C,2),A=L[0],q=L[1],U=function(){R(null)},I=function(){var t=Object(d.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.logout();case 2:o.push("/");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),G=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),j((function(e){return!e})),t.next=4,e.searchUser({searchQuery:A.searchQuery});case 4:q(Object(g.a)(Object(g.a)({},A),{},{searchQueryResult:e.group.searchQuery}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return n.a.createElement("div",{className:s.root},n.a.createElement(E.a,null),n.a.createElement(K.a,{position:"fixed",className:Object(J.a)(s.appBar,Object(f.a)({},s.appBarShift,u))},n.a.createElement(Y.a,{style:{justifyContent:"space-between"}},n.a.createElement("div",{className:s.menuLogo},n.a.createElement(O.a,{variant:"h6",noWrap:!0,style:{width:"50px",height:"50px",borderRadius:"50%"}},n.a.createElement("img",{src:T.a,alt:"user",style:{width:"100%"}})),n.a.createElement("form",{className:s.search,style:{marginLeft:"100px"},onSubmit:G},n.a.createElement("div",{className:s.searchIcon},n.a.createElement(be.a,{type:"submit"})),n.a.createElement(Ee.a,{placeholder:"Search\u2026",classes:{root:s.inputRoot,input:s.inputInput},value:A.searchQuery,inputProps:{"aria-label":"search"},onChange:function(e){return t="searchQuery",a=e.target.value,void q(Object(g.a)(Object(g.a)({},A),{},Object(f.a)({},t,a)));var t,a}}),n.a.createElement(Oe.a,{onClickAway:function(){j(!1),q(Object(g.a)(Object(g.a)({},A),{},{searchQuery:""}))}},n.a.createElement("div",{className:s.rootclick},n.a.createElement("div",null,y?n.a.createElement("div",{className:s.dropdown},n.a.createElement(x.a,{style:{margin:"10px 0"},container:!0,direction:"column"},A.searchQueryResult&&A.searchQueryResult.map((function(e){return n.a.createElement(x.a,{item:!0,key:e._id},n.a.createElement("div",{style:{color:"white"}},"We have this user."),n.a.createElement(ke.a,null,n.a.createElement(Ne.a,{avatar:n.a.createElement(Q.a,{alt:"user",src:e.photoURL||we.a}),title:e.firstName+" "+e.lastName})))})))):null))))),e.user&&n.a.createElement("div",null,n.a.createElement(D.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){R(e.currentTarget)},color:"inherit"},n.a.createElement("div",null),e.user.photoURL?n.a.createElement("img",{src:e.user.photoURL,alt:e.user.firstName,className:s.user}):n.a.createElement("span",{className:s.user,style:{padding:4}},e.user.firstName[0],e.user.lastName[0])),n.a.createElement(de.a,{id:"simple-menu",anchorEl:S,keepMounted:!0,open:Boolean(S),onClose:U},n.a.createElement(fe.a,{onClick:U},n.a.createElement(ge.b,{to:"/profile",style:{color:"black",textDecoration:"none"}},"Profile")),n.a.createElement(fe.a,{onClick:I},"Logout"))))),n.a.createElement(X.a,{variant:"permanent",className:Object(J.a)(s.drawer,(t={},Object(f.a)(t,s.drawerOpen,u),Object(f.a)(t,s.drawerClose,!u),t)),classes:{paper:Object(J.a)((a={},Object(f.a)(a,s.drawerOpen,u),Object(f.a)(a,s.drawerClose,!u),a))}},n.a.createElement("div",{className:s.toolbar},n.a.createElement(D.a,{onClick:function(){m(!1)}},"rtl"===c.direction?n.a.createElement(ne.a,null):n.a.createElement(ae.a,null))),n.a.createElement(ee.a,null),n.a.createElement(Z.a,null,n.a.createElement(se.a,{button:!0},n.a.createElement(ge.b,{to:"/home",style:{textDecoration:"none"}},n.a.createElement(ce.a,null,n.a.createElement(le.a,null)))),n.a.createElement(se.a,{button:!0},n.a.createElement(ge.b,{to:"/friend",style:{textDecoration:"none"}},n.a.createElement(ce.a,null,n.a.createElement(pe.a,null)))),n.a.createElement(se.a,{button:!0},n.a.createElement(ge.b,{to:"/group",style:{textDecoration:"none"}},n.a.createElement(ce.a,null,n.a.createElement(ue.a,null)))))),n.a.createElement("main",{className:s.content},n.a.createElement("div",{className:s.toolbar})))})),Ce=a(296),Le=a(295),Ae=a(109),qe=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.prev=1,t.next=4,R()({method:"post",url:"/request",data:e});case 4:r=t.sent,n=r.data,a({type:"REQUEST",payload:{error:null,request:n}}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0),a({type:"REQUEST",payload:{error:t.t0.response.data.error,request:null}});case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},Ue=a(308),Te=a(305),Ie=a(106),Ge=a.n(Ie),De=a(107),Fe=a.n(De),We=a(297),_e=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={users:null,snackbarOpen:!1,snackbarMessage:"",snackbarSeverity:"success"},e.connect=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.sendRequest({receiver:a,sender:e.props.userState.user.id});case 2:e.props.request.error?e.setState({snackbarOpen:!0,snackbarMessage:e.props.request.error,snackbarSeverity:"error"}):e.setState({snackbarOpen:!0,snackbarMessage:e.props.request.request.message});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.acceptGroupRequest=function(){var t=Object(d.a)(p.a.mark((function t(a,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.updatetRequest({isAccepted:!0,id:a,groupId:r});case 2:return e.setState({snackbarOpen:!0,snackbarMessage:"Accept request successfully"}),t.next=5,e.props.allRequest();case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.Accept=function(){var t=Object(d.a)(p.a.mark((function t(a,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.updatetRequest({isAccepted:!0,id:a,friend:r});case 2:return e.setState({snackbarOpen:!0,snackbarMessage:"Accept request successfully"}),t.next=5,e.props.allRequest();case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.Reject=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.updatetRequest({isReject:!0,id:a});case 2:return e.setState({snackbarOpen:!0,snackbarMessage:"Reject request successfully",snackbarSeverity:"error"}),t.next=5,e.props.allRequest();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showSnackbar=function(){return n.a.createElement(Ue.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:e.state.snackbarOpen,onClose:function(){e.setState({snackbarOpen:!1})},autoHideDuration:3e3},n.a.createElement(Te.a,{severity:e.state.snackbarSeverity,variant:"filled"},e.state.snackbarMessage))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.userState.users){e.next=3;break}return e.next=3,this.props.allUser();case 3:return e.next=5,this.props.allRequest();case 5:return this.setState({users:this.props.userState.users}),e.next=8,this.props.updatetRequest();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"backgrnd-home",style:{marginLeft:"100px"}},n.a.createElement(Re,null),this.state.users?n.a.createElement("div",{className:"row"},n.a.createElement(x.a,{container:!0},n.a.createElement(x.a,{container:!0,item:!0,spacing:3,xs:12,sm:9},this.state.users&&this.state.users.map((function(t){return n.a.createElement(x.a,{item:!0,xs:12,sm:4,key:t._id},n.a.createElement(ke.a,{style:{maxWidth:"200px"},className:"col-2"},n.a.createElement(Le.a,{className:"user-image",component:"img",image:t.photoURL||we.a,title:"user iamge"}),n.a.createElement(Ce.a,{style:{justifyContent:"center",flexDirection:"column"}},n.a.createElement(O.a,{style:{fontWeight:"bold"}},t.firstName+" "+t.lastName),n.a.createElement(b.a,{variant:"outlined",color:"primary",onClick:function(){return e.connect(t._id)}},"connect"))))}))),n.a.createElement(x.a,{item:!0,xs:12,sm:3},n.a.createElement(Ae.a,{style:{padding:"5px 5px 20px 5px"}},n.a.createElement("div",{style:{textAlign:"center",maxWidth:"300px"}},n.a.createElement("h3",null,"Requests"),this.props.request.requests&&this.props.request.requests.map((function(t){return n.a.createElement(ke.a,{style:{display:"flex",margin:"10px"},key:t._id},t.sender&&n.a.createElement(n.a.Fragment,null,n.a.createElement(x.a,{item:!0,xs:3,style:{float:"left"}},n.a.createElement("img",{alt:"user",src:t.sender.photoURL||we.a,style:{width:"40px",height:"40px",borderRadius:"50px"}})),n.a.createElement(x.a,{item:!0,xs:3,style:{float:"right",marginTop:"10px"}},t.sender.firstName+" "+t.sender.lastName),n.a.createElement(x.a,{item:!0,xs:3,style:{float:"right",marginTop:"5px"}},n.a.createElement(D.a,{"aria-label":"delete",color:"primary",onClick:function(){return e.Accept(t._id,t.sender._id)}},n.a.createElement(Ge.a,null))),n.a.createElement(x.a,{item:!0,xs:3,style:{float:"right",marginTop:"5px"}},n.a.createElement(D.a,{"aria-label":"delete",color:"secondary",onClick:function(){return e.Reject(t._id)}},n.a.createElement(Fe.a,null)))),t.groupId&&n.a.createElement(n.a.Fragment,null,n.a.createElement(x.a,{item:!0,xs:3,style:{float:"left"}},n.a.createElement("img",{alt:"user",src:t.groupId.photoURL||we.a,style:{width:"40px",height:"40px",borderRadius:"50px"}})),n.a.createElement(x.a,{item:!0,xs:3,style:{float:"right",marginTop:"10px"}},t.groupId.groupName),n.a.createElement(x.a,{item:!0,xs:3,style:{float:"right",marginTop:"5px"}},n.a.createElement(D.a,{"aria-label":"delete",color:"primary",onClick:function(){return e.acceptGroupRequest(t._id,t.groupId._id)}},n.a.createElement(Ge.a,null))),n.a.createElement(x.a,{item:!0,xs:3,style:{float:"right",marginTop:"5px"}},n.a.createElement(D.a,{"aria-label":"delete",color:"secondary",onClick:function(){return e.Reject(t._id)}},n.a.createElement(Fe.a,null)))))}))))))):n.a.createElement("div",{className:"loader"},n.a.createElement(We.a,null)),this.showSnackbar())}}]),a}(r.Component),Pe=Object(N.b)((function(e){return{userState:e.userState,request:e.requestReducer}}),{allUser:function(){return function(){var e=Object(d.a)(p.a.mark((function e(t){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,R.a.defaults.withCredentials=!0,e.next=4,R()("/users/alluser");case 4:a=e.sent,r=a.data,t({type:"ALLUSER",payload:{users:r}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},sendRequest:qe,allRequest:function(){return function(){var e=Object(d.a)(p.a.mark((function e(t){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R()("/request/all");case 3:a=e.sent,r=a.data,t({type:"ALLREQUEST",payload:{requests:r}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},updatetRequest:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R()({method:"put",url:"/request/update",data:e});case 3:r=t.sent,n=r.data,a({type:"UPDATEREQUEST",payload:{error:null,update:n}}),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),console.log(t.t0.response.data),a({type:"UPDATEREQUEST",payload:{error:t.t0.response.data.error,request:null}});case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}})(_e),Qe=Object(N.b)((function(e){return{user:e.userState.user,isAuth:e.isAuthenticated}}))((function(e){return e.user&&n.a.createElement("div",null,n.a.createElement(Re,null),n.a.createElement("main",{className:"backgrnd",style:{marginLeft:"100px",textAlign:"center",marginTop:"50px "}},n.a.createElement("div",{style:{marginBottom:"40px"}},e.user&&e.user.photoURL?n.a.createElement("img",{src:e.user.photoURL,style:{borderRadius:"50%",width:"50%",height:"50%"},alt:e.user.firstName}):n.a.createElement("span",{style:{background:"gray",borderRadius:"50%",width:"50%",height:"50%",padding:"40px",color:"#000",fontSize:"50px",textTransform:"uppercase"}},e.user.firstName[0],e.user.lastName[0])),n.a.createElement("h3",null,"Name: ",e.user.firstName+" "+e.user.lastName),n.a.createElement("h3",null,"Email: ",e.user.email)))})),Me=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",background:"#fff",padding:e.spacing(3),boxShadow:"0px 3px 3px -2px rgba(0,0,0,0.2), 0px 3px 4px 0px rgba(0,0,0,0.14), 0px 1px 8px 0px rgba(0,0,0,0.12)"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),ze=Object(N.b)((function(e){return console.log(e),{user:e.userState}}),{changePassword:q})((function(e){var t=Me(),a=Object(k.e)(),s=Object(N.c)(),c=Object(r.useState)({resetToken:"",password:"",isSubmitting:!1,email:e.match.params.email}),o=Object(h.a)(c,2),l=o[0],i=o[1],u=function(e,t){i(Object(g.a)(Object(g.a)({},l),{},Object(f.a)({},e,t)))},m=function(){var t=Object(d.a)(p.a.mark((function t(r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),i(Object(g.a)(Object(g.a)({},l),{},{isSubmitting:!0})),t.next=4,s(q(l));case 4:i(Object(g.a)(Object(g.a)({},l),{},{isSubmitting:!1})),e.user.error||a.push("/");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return n.a.createElement(w.a,{component:"main",maxWidth:"xs"},n.a.createElement(E.a,null),n.a.createElement("div",{className:t.paper},n.a.createElement(Q.a,{className:t.avatar},n.a.createElement(z.a,null)),n.a.createElement(O.a,{component:"h1",variant:"h5"},"Reset Password"),n.a.createElement("form",{className:t.form,noValidate:!0,onSubmit:m},n.a.createElement(x.a,null,n.a.createElement("h2",null," ",e.match.params.email)),n.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"resetToken",label:"resetToken",type:"resetToken",id:"resetToken",autoComplete:"resetToken",value:l.resetToken,onChange:function(e){return u("resetToken",e.target.value)}}),n.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:l.password,onChange:function(e){return u("password",e.target.value)}}),n.a.createElement(x.a,null,n.a.createElement("div",{className:"error"},e.user.error)),n.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Change Password"),n.a.createElement(x.a,{container:!0},n.a.createElement(x.a,{item:!0,xs:!0}),n.a.createElement(x.a,{item:!0},"Back to",n.a.createElement(y.a,{href:"/",variant:"body2",className:"mt-2"}," Sign in"))))))})),He=a(108),Be=a(33),Je=a(298),Ve=a(306),$e=a(86),Xe=a.n($e),Ke=a(88),Ye=a.n(Ke),Ze=a(84),et=a(281),tt=a(85),at=a.n(tt),rt=a(87),nt=a.n(rt),st=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={friends:null,selectFriend:null,message:"",messages:[],user:e.props.user.user,loading:!1,openemoji:!1,chosenEmoji:null},e.socket=null,e.sendMessage=function(){var t=Object(d.a)(p.a.mark((function t(a){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),r={name:e.state.user.firstName+" "+e.state.user.lastName,photoURL:e.state.user.photoURL||null,sender:e.state.user.id,message:e.state.message,socketId:e.state.selectFriend.socketId,receiver:e.state.selectFriend._id},e.state.message&&(e.socket.emit("one-2-one",r),e.setState(Object(g.a)(Object(g.a)({},e.state),{},{message:""})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderCards=function(){console.log("inside renderrrr",e.props.chats),e.props.chats.chats&&e.props.chats.chats.chats.map((function(e){return{}}))},e.handleFrndChat=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.unread=0,t.next=3,e.setState({selectFriend:a});case 3:return e.setState({loading:!0}),t.next=6,e.props.singleChat(a._id);case 6:e.setState({messages:e.props.chats.singleMessages}),e.setState({loading:!1});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onChangeHandler=function(t){console.log(t.target.files[0]);var a={name:e.state.user.firstName+" "+e.state.user.lastName,photoURL:e.state.user.photoURL||null,sender:e.state.user.id,file:t.target.files[0],fileName:t.target.files[0].name,type:t.target.files[0].type,socketId:e.state.selectFriend.socketId,receiver:e.state.selectFriend._id};e.socket.emit("single-fileupload",a)},e.handleClickEmoji=function(){e.setState({openemoji:!0})},e.handleClickAwayEmoji=function(){e.setState({openemoji:!1})},e.onEmojiClick=function(){var t=Object(d.a)(p.a.mark((function t(a,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState(Object(g.a)(Object(g.a)({},e.state),{},{message:e.state.message+r.emoji}));case 2:e.setState({chosenEmoji:!1});case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.allFriends();case 2:return e.next=4,this.setState({friends:this.props.friend.friends.friends});case 4:this.socket=Ze("/"),this.socket.emit("user-join",this.props.user.user.id),this.socket.on("user-join",function(){var e=Object(d.a)(p.a.mark((function e(a){var r,n,s,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Object(Be.a)(t.state.friends),n=Object(He.a)(r);try{for(n.s();!(s=n.n()).done;)(c=s.value).unread=0,c._id===a.userId&&(c.socketId=a.socketId)}catch(o){n.e(o)}finally{n.f()}return e.next=5,t.setState({friends:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.socket.on("one-2-one",(function(e){if(e.sender===t.state.user.id||t.state.selectFriend&&t.state.selectFriend._id===e.sender){var a=Object(Be.a)(t.state.messages);a.push(e),t.setState({messages:a})}else{var r,n=Object(Be.a)(t.state.friends),s=Object(He.a)(n);try{for(s.s();!(r=s.n()).done;){var c=r.value;c._id===e.sender&&(c.unread=c.unread?c.unread+1:1)}}catch(o){s.e(o)}finally{s.f()}t.setState({friends:n})}}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"handleSave",value:function(e){this.setState({files:e,open:!1}),console.log(e)}},{key:"handleOpen",value:function(){this.setState({open:!0})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"backgrnd",style:{marginLeft:"100px"}},n.a.createElement(Re,null),this.state.friends?n.a.createElement(x.a,{container:!0},n.a.createElement(x.a,{item:!0,sm:3},n.a.createElement("div",{className:"friend-list"},n.a.createElement(x.a,{container:!0,direction:"column",alignItems:"flex-start"},this.state.friends&&this.state.friends.map((function(t){return n.a.createElement(x.a,{item:!0,key:t._id,style:{margin:"10px 0"}},n.a.createElement(ke.a,{className:"backgrnd",onClick:function(){return e.handleFrndChat(t)},style:e.state.selectFriend&&e.state.selectFriend._id===t._id?{backgroundColor:"#bbb"}:{cursor:"pointer"}},n.a.createElement(Ne.a,{avatar:n.a.createElement(Q.a,{alt:"user",src:t.photoURL||we.a}),title:t.firstName+" "+t.lastName,action:n.a.createElement("span",{className:"unread"},t.unread>0&&t.unread),subheader:new Date(t.createdAt).toLocaleDateString()+" "+new Date(t.createdAt).toLocaleTimeString()})))}))))),n.a.createElement(x.a,{item:!0,sm:9},this.state.selectFriend?n.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},n.a.createElement(K.a,{position:"relative",style:{background:"#37474f"}},n.a.createElement(Y.a,null,n.a.createElement(O.a,{variant:"h6",className:"title",noWrap:!0},n.a.createElement(Ne.a,{avatar:n.a.createElement(Q.a,{alt:"user",src:this.state.selectFriend.photoURL||we.a}),title:this.state.selectFriend.firstName+" "+this.state.selectFriend.lastName})),n.a.createElement(Ve.a,{title:"Share documents","aria-label":"add"},n.a.createElement(Je.a,{size:"small",style:{marginRight:"8px"}},n.a.createElement("input",{accept:"image/*,video/*,application/pdf",className:"input",id:"icon-button-file",type:"file",onChange:this.onChangeHandler}),n.a.createElement("label",{htmlFor:"icon-button-file"},n.a.createElement(D.a,{type:"file","aria-label":"upload picture",component:"span"},n.a.createElement(Xe.a,null))))))),n.a.createElement("div",{className:"chat-box"},n.a.createElement(x.a,{className:"messages"},this.state.loading&&n.a.createElement("div",{className:"loader"},n.a.createElement(We.a,null)),this.state.messages.map((function(e){return n.a.createElement(x.a,{item:!0,xs:12,key:e._id,style:{padding:"8px"}},n.a.createElement("div",{className:"message"},n.a.createElement(Q.a,{className:"message-photo",src:e.photoURL||we.a,alt:"message"}),n.a.createElement("div",{className:"message-name"},e.name)),e.file?n.a.createElement(n.a.Fragment,null,-1!==(null===e||void 0===e?void 0:e.type.indexOf("video"))?n.a.createElement("video",{width:"320",height:"240",controls:!0,autoPlay:!0},n.a.createElement("source",{src:"/uploads/".concat(e.file),type:e.type})):-1!==(null===e||void 0===e?void 0:e.type.indexOf("pdf"))||-1!==(null===e||void 0===e?void 0:e.type.indexOf("text"))?n.a.createElement("div",{className:"message-content"},n.a.createElement("a",{className:"send-link",target:"_blank",href:"/uploads/"+e.file},e.fileName||"open pdf")):n.a.createElement("img",{className:"message-file",src:"/uploads/".concat(e.file),alt:e.file})):n.a.createElement("div",{className:"message-content"},e.message))}))),n.a.createElement("form",{className:"message-form",onSubmit:this.sendMessage},n.a.createElement(x.a,{container:!0},n.a.createElement(x.a,{item:!0,xs:1,sm:1},n.a.createElement("div",null,n.a.createElement(Oe.a,{onClickAway:this.handleClickAwayEmoji},n.a.createElement("div",null,n.a.createElement(nt.a,{onClick:this.handleClickEmoji,style:{cursor:"pointer"}}),this.state.openemoji?n.a.createElement(et.a,null,n.a.createElement("div",{className:"emoji-class"},n.a.createElement(at.a,{onEmojiClick:this.onEmojiClick}))):null)))),n.a.createElement(x.a,{item:!0,xs:9,sm:10},n.a.createElement(v.a,{fullWidth:!0,name:"message",variant:"outlined",autoComplete:"off",size:"small",value:this.state.message,onChange:function(t){return e.setState({message:t.target.value})}})),n.a.createElement(x.a,{item:!0,xs:2,sm:1},n.a.createElement(Je.a,{style:{width:"40px",height:"40px"},type:"submit"},n.a.createElement(Ye.a,null))))))):n.a.createElement("div",null,n.a.createElement("h1",null,"Click on any friend to start conversation.")))):n.a.createElement("div",{className:"loader"},n.a.createElement(We.a,null)))}}]),a}(r.Component),ct=Object(N.b)((function(e){return{friend:e.requestReducer,user:e.userState,chats:e.chatReducer}}),{allFriends:function(){return function(){var e=Object(d.a)(p.a.mark((function e(t){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R()("/users/friend");case 3:a=e.sent,r=a.data,t({type:"FRIENDS",payload:{friends:r}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},singleChat:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,R.a.defaults.withCredentials=!0,t.next=4,R()("/chat/single/".concat(e));case 4:r=t.sent,n=r.data,a({type:"SINGLECHAT",payload:{singleMessages:n}}),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),console.log(t.t0.response.data),a({type:"SINGLECHAT",payload:{error:t.t0.response.data.error,group:null}});case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}})(st),ot=a(299),lt=a(303),it=a(301),ut=a(302),mt=a(300),pt=a(153),dt=a.n(pt),ft=Object(j.a)((function(e){return{root:{flexGrow:1,width:"100%"},root1:{display:"flex",justifyContent:"center",height:"100vh",alignItems:"center"},title:Object(f.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(f.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(V.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(V.c)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(f.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}}),input:{display:"none"},dropdown:{position:"fixed",width:200,top:"50%",left:"50%",transform:"translate(-50%, -50%)",border:"1px solid",padding:e.spacing(1),backgroundColor:e.palette.background.paper}}})),gt=Object(N.b)((function(e){return{userState:e.userState,group:e.groupReducer,request:e.requestReducer,chat:e.chatReducer}}),{createGroup:ve,findGroups:ye,searchUser:xe,sendRequest:qe,allMessage:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,R.a.defaults.withCredentials=!0,t.next=4,R()("/chat/".concat(e));case 4:r=t.sent,n=r.data,a({type:"ALLMESSAGE",payload:{messages:n}}),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),console.log(t.t0.response.data),a({type:"ALLMESSAGE",payload:{error:t.t0.response.data.error,group:null}});case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=ft(),a=n.a.useState(!1),s=Object(h.a)(a,2),c=s[0],o=s[1],l=n.a.useState(!1),i=Object(h.a)(l,2),u=i[0],m=i[1],E=n.a.useState(!1),y=Object(h.a)(E,2),j=y[0],w=y[1],k=Object(N.c)(),S=Object(r.useState)({groupName:null,isSubmitting:null,photoURL:null,searchQuery:null,searchQueryResult:null,selectedGroup:null,snackbarOpen:!1,snackbarMessage:"",snackbarSeverity:"success",user:e.userState.user,message:""}),R=Object(h.a)(S,2),C=R[0],L=R[1],A=function(){var e=Object(d.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(Object(g.a)(Object(g.a)({},C),{},{message:C.message+a.emoji}));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),q=Object(r.useState)(!1),U=Object(h.a)(q,2),T=U[0],I=U[1],G=Object(r.useState)([]),F=Object(h.a)(G,2),W=F[0],_=F[1],P=Ze("/"),M=function(){m(!1)},z=function(){w(!1)},H=function(e,t){L(Object(g.a)(Object(g.a)({},C),{},Object(f.a)({},e,t)))},B=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return L(Object(g.a)(Object(g.a)({},C),{},{isSubmitting:!0})),t.next=3,k(ve(C));case 3:L(Object(g.a)(Object(g.a)({},C),{},{isSubmitting:!1})),e.findGroups(),m(!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),J=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.searchUser({searchQuery:C.searchQuery});case 2:L(Object(g.a)(Object(g.a)({},C),{},{searchQueryResult:e.group.searchQuery}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),V=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.sendRequest({receiver:a,groupId:C.selectedGroup._id});case 2:e.request.error?L(Object(g.a)(Object(g.a)({},C),{},{snackbarOpen:!0,snackbarMessage:e.request.error,snackbarSeverity:"error"})):L(Object(g.a)(Object(g.a)({},C),{},{snackbarOpen:!0,snackbarMessage:e.request.request.message})),w(!1),setTimeout((function(){L(Object(g.a)(Object(g.a)({},C),{},{selectedGroup:C.selectedGroup}))}),2e3);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){k(ye())}),[k]),P.on("message",(function(e){_((function(t){return t.concat(e)}))}));var $=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return L(Object(g.a)(Object(g.a)({},C),{},{selectedGroup:a})),I(!0),t.next=4,e.allMessage(a._id);case 4:_(e.chat.messages),I(!1),P.emit("join",a._id);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),X=function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a={name:C.user.firstName+" "+C.user.lastName,photoURL:C.user.photoURL||null,sender:C.user.id,message:C.message,groupId:C.selectedGroup._id},C.message&&(P.emit("message",a),L(Object(g.a)(Object(g.a)({},C),{},{message:""})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:"backgrnd",style:{marginLeft:"100px"}},n.a.createElement(Re,null),e.group.groups?n.a.createElement(x.a,{container:!0},n.a.createElement(x.a,{item:!0,sm:3,style:{marginTop:"25px"}},n.a.createElement(b.a,{variant:"outlined",color:"primary",onClick:function(){m(!0)}},"Create a New Group"),n.a.createElement(ot.a,{open:u,onClose:M,"aria-labelledby":"form-dialog-title"},n.a.createElement(mt.a,{id:"form-dialog-title"},"New Group"),n.a.createElement(it.a,null,n.a.createElement(ut.a,null,"To create a new group"),n.a.createElement(v.a,{autoFocus:!0,margin:"dense",id:"Group name",label:" Group name",type:"text",fullWidth:!0,required:!0,onChange:function(e){return H("groupName",e.target.value)}}),n.a.createElement(v.a,{margin:"dense",id:"group logo",label:" Group logo",type:"text",fullWidth:!0,required:!0,onChange:function(e){return H("photoURL",e.target.value)}})),n.a.createElement(lt.a,null,n.a.createElement(b.a,{onClick:M,color:"primary"},"Cancel"),n.a.createElement(b.a,{onClick:B,disabled:C.isSubmitting||!(C.photoURL&&C.groupName),color:"primary"},"Done"))),n.a.createElement("div",{className:"group-list"},n.a.createElement(x.a,{container:!0,direction:"column",alignItems:"flex-start"},e.group.groups&&e.group.groups.map((function(e){return n.a.createElement(x.a,{item:!0,key:e._id,style:{margin:"10px 0"}},n.a.createElement(ke.a,{onClick:function(){return $(e)},style:C.selectedGroup&&C.selectedGroup._id===e._id?{backgroundColor:"#ccc"}:{cursor:"pointer"}},n.a.createElement(Ne.a,{avatar:n.a.createElement(Q.a,{alt:"user",src:e.photoURL||we.a}),title:e.groupName,subheader:new Date(e.createdAt).toLocaleDateString()+" "+new Date(e.createdAt).toLocaleTimeString()})))}))))),n.a.createElement(x.a,{item:!0,sm:9},C.selectedGroup?n.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},n.a.createElement(K.a,{position:"relative",style:{background:"#37474f"}},n.a.createElement(Y.a,null,n.a.createElement(O.a,{className:t.title,variant:"h6",noWrap:!0},n.a.createElement(Ne.a,{avatar:n.a.createElement(Q.a,{alt:"user",src:C.selectedGroup.photoURL||we.a}),title:C.selectedGroup.groupName})),n.a.createElement("div",null,n.a.createElement(Ve.a,{title:"Share documents","aria-label":"add"},n.a.createElement(Je.a,{size:"small",style:{marginRight:"8px"}},n.a.createElement("input",{accept:"image/*,video/*,application/pdf",className:t.input,id:"icon-button-file",type:"file",onChange:function(e){console.log(e.target.files[0]);var t={name:C.user.firstName+" "+C.user.lastName,photoURL:C.user.photoURL||null,sender:C.user.id,file:e.target.files[0],type:e.target.files[0].type,fileName:e.target.files[0].name,groupId:C.selectedGroup._id};console.log(C),P.emit("fileupload",t)}}),n.a.createElement("label",{htmlFor:"icon-button-file"},n.a.createElement(D.a,{type:"file","aria-label":"upload picture",component:"span"},n.a.createElement(Xe.a,null))))),C.user.id===C.selectedGroup.owner&&n.a.createElement(Ve.a,{title:"Add member","aria-label":"add"},n.a.createElement(Je.a,{size:"small",onClick:function(){w(!0)}},n.a.createElement(dt.a,null))),n.a.createElement(ot.a,{open:j,onClose:z,"aria-labelledby":"form-dialog-title"},n.a.createElement(mt.a,{id:"form-dialog-title"},"Search User"),n.a.createElement(it.a,null,n.a.createElement(v.a,{autoFocus:!0,margin:"dense",id:"search",label:"Search",type:"text",fullWidth:!0,onChange:function(e){return t="searchQuery",a=e.target.value,void L(Object(g.a)(Object(g.a)({},C),{},Object(f.a)({},t,a)));var t,a}})),n.a.createElement(lt.a,null,n.a.createElement(x.a,{style:{margin:"10px 0"},container:!0,direction:"column"},C.searchQueryResult&&C.searchQueryResult.map((function(e){return n.a.createElement(x.a,{item:!0,key:e._id},n.a.createElement(Ve.a,{title:"click for send request","aria-label":"add",style:{cursor:"pointer"}},n.a.createElement(ke.a,{onClick:function(){return V(e._id)}},n.a.createElement(Ne.a,{avatar:n.a.createElement(Q.a,{alt:"user",src:e.photoURL||we.a}),title:e.firstName+" "+e.lastName}))))})))),n.a.createElement(lt.a,null,n.a.createElement(b.a,{onClick:z,color:"primary"},"Cancel"),n.a.createElement(b.a,{onClick:J,color:"primary"},"Search")))))),n.a.createElement("div",{className:"chat-box"},n.a.createElement(x.a,{className:"messages"},T&&n.a.createElement("div",{className:t.root1},n.a.createElement(We.a,null)),W&&W.map((function(e){return n.a.createElement(x.a,{item:!0,xs:12,key:e._id,style:{padding:"8px"}},n.a.createElement("div",{className:"message"},n.a.createElement(Q.a,{className:"message-photo",src:e.phtoURL||we.a,alt:"message"}),n.a.createElement("div",{className:"message-name"},e.name)),e.file?n.a.createElement(n.a.Fragment,null,-1!==(null===e||void 0===e?void 0:e.type.indexOf("video"))?n.a.createElement("video",{width:"320",height:"240",controls:!0,autoPlay:!0},n.a.createElement("source",{src:"/uploads/".concat(e.file),type:e.typetype})):-1!==(null===e||void 0===e?void 0:e.type.indexOf("pdf"))||-1!==(null===e||void 0===e?void 0:e.type.indexOf("text"))?n.a.createElement("div",{className:"message-content"},n.a.createElement("a",{className:"send-link",target:"_blank",href:"/uploads/"+e.file},e.fileName||"open pdf")):n.a.createElement("img",{className:"message-file",src:"/uploads/".concat(e.file),alt:e.file})):n.a.createElement("div",{className:"message-content"},e.message))}))),n.a.createElement("form",{className:"message-form",onSubmit:X},n.a.createElement(x.a,{container:!0},n.a.createElement(x.a,{item:!0,xs:1,sm:1},n.a.createElement("div",null,n.a.createElement(Oe.a,{onClickAway:function(){o(!1)}},n.a.createElement("div",null,n.a.createElement(nt.a,{onClick:function(){o((function(e){return!e}))},style:{cursor:"pointer"}}),c?n.a.createElement(et.a,null,n.a.createElement("div",{className:t.dropdown},n.a.createElement(at.a,{onEmojiClick:A}))):null)))),n.a.createElement(x.a,{item:!0,xs:9,sm:10},n.a.createElement(v.a,{fullWidth:!0,placeholder:"type a message ",name:"message",variant:"outlined",autoComplete:"off",size:"small",value:C.message,onChange:function(e){return L(Object(g.a)(Object(g.a)({},C),{},{message:e.target.value}))}})),n.a.createElement(x.a,{item:!0,xs:2,sm:1},n.a.createElement(Je.a,{style:{width:"40px",height:"40px"},type:"submit"},n.a.createElement(Ye.a,null))))))):n.a.createElement("div",null,n.a.createElement("h1",null,"Click on any group for chatting.")))):n.a.createElement("div",{className:t.root1},n.a.createElement(We.a,null)),n.a.createElement(Ue.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:C.snackbarOpen,onClose:function(){L({snackbarOpen:!1})},autoHideDuration:3e3},n.a.createElement(Te.a,{severity:C.snackbarSeverity,variant:"filled"},C.snackbarMessage)))})),ht=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(ge.a,null,n.a.createElement(k.a,{path:"/",component:G,exact:!0}),n.a.createElement(k.a,{path:"/register",component:P,exact:!0}),n.a.createElement(k.a,{path:"/forgotPassword",component:B,exact:!0}),n.a.createElement(k.a,{path:"/home",component:Pe,exact:!0}),n.a.createElement(k.a,{path:"/Profile",component:Qe,exact:!0}),n.a.createElement(k.a,{path:"/resetPassword/:email",component:ze,exact:!0}),n.a.createElement(k.a,{path:"/friend",component:ct,exact:!0}),n.a.createElement(k.a,{path:"/group",component:gt,exact:!0})))}}]),a}(r.Component),bt=a(60),Et={user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null,isAuthenticated:localStorage.getItem("isAuth")||!1,info:null,error:null,users:null,useremail:null},vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"REGISTER":var n=Object.assign(e,r);return n;case"LOGIN":return r.user&&(localStorage.setItem("user",JSON.stringify(r.user)),localStorage.setItem("isAuth",!0)),Object.assign(e,r);case"LOGOUT":return localStorage.removeItem("user"),localStorage.removeItem("isAuth"),Object(g.a)(Object(g.a)({},e),{},{user:null,isAuthenticated:!1});case"ALLUSER":return Object.assign(e,r);case"FORGOTPASSWORD":var s=Object.assign(e,r);return s;case"CHANGEPASSWORD":return r.user&&localStorage.setItem("user",JSON.stringify(r.user)),Object.assign(e,r);default:return e}},yt={request:null,error:null,requests:null,update:null,friends:null},xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"REQUEST":var n=Object.assign(e,r);return n;case"ALLREQUEST":case"UPDATEREQUEST":case"FRIENDS":return Object.assign(e,r);default:return e}},Ot=a(154),jt={group:null,error:null,info:null,groups:null,searchQuery:null,message:null},wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"CREATEGROUP":return Object(g.a)(Object(g.a)({},e),{},{group:r.group,error:r.error});case"FINDGROUP":return Object(g.a)(Object(g.a)({},e),{},{groups:r});case"SEARCHUSER":return Object.assign(e,r);case"ALLMESSAGE":return Object(g.a)(Object(g.a)({},e),{},{message:r});default:return e}},kt={messages:[],singleMessages:[]},Nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"ALLMESSAGE":case"SINGLECHAT":return Object.assign(e,r);default:return e}},St=Object(bt.c)({userState:vt,requestReducer:xt,groupReducer:wt,chatReducer:Nt}),Rt=Object(bt.d)(St,Object(bt.a)(Ot.a));a(231);c.a.render(n.a.createElement(N.a,{store:Rt},n.a.createElement(ht,null)),document.getElementById("root"))},24:function(e,t,a){e.exports=a.p+"static/media/user.afe9779a.jpg"},54:function(e,t,a){e.exports=a.p+"static/media/ouricon.c1f7ad7e.jpg"}},[[170,1,2]]]);
//# sourceMappingURL=main.7dd7f2d2.chunk.js.map