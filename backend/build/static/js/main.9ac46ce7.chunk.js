(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{170:function(e,t,a){e.exports=a(232)},20:function(e,t,a){e.exports=a.p+"static/media/user.afe9779a.jpg"},228:function(e,t){},231:function(e,t,a){},232:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(13),c=a.n(s),o=a(39),i=a(27),l=a(44),u=a(43),m=a(4),p=a.n(m),d=a(9),f=a(8),h=a(6),g=a(15),b=a(285),E=a(279),v=a(304),y=a(284),x=a(283),O=a(53),j=a(274),w=a(277),k=a(18),N=a(14),S=a(16),R=a.n(S),C=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(r=new FormData).append("firstName",e.firstName),r.append("lastName",e.lastName),r.append("email",e.email),r.append("password",e.password),e.photoURL&&r.append("photoURL",e.photoURL,e.photoURL.name),t.next=9,R()({method:"post",url:"/users/register",data:r,headers:{"content-type":"multipart/form-data",Accept:"application/json",type:"formData"}});case 9:n=t.sent,s=n.data,a({type:"REGISTER",payload:{error:null,info:s}}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),a({type:"REGISTER",payload:{error:t.t0.response.data.message,info:null}});case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()},L=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.prev=1,R.a.defaults.withCredentials=!0,(r=new FormData).append("firstName",e.firstName),r.append("lastName",e.lastName),r.append("email",e.email),r.append("password",e.password),r.append("token",e.token),e.photoURL&&r.append("photoURL",e.photoURL,e.photoURL.name),t.next=12,R()({method:"Put",url:"/users/".concat(e.userId),data:r,headers:{"content-type":"multipart/form-data"}});case 12:n=t.sent,s=n.data,console.log(s,"1234"),a({type:"UPDATEUSER",payload:{error:null,info:s,photoURL:s.photoURL,firstName:s.firstName,lastName:s.lastName}}),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(1),console.log("adsfasdf",t.t0.response),a({type:"UPDATEUSER",payload:{error:t.t0.response?t.t0.response.data.message:"update error",info:null}});case 22:case"end":return t.stop()}}),t,null,[[1,18]])})));return function(e){return t.apply(this,arguments)}}()},U=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R()({method:"post",url:"/users/login",data:{email:e.email,password:e.password}});case 3:r=t.sent,n=r.data,a({type:"LOGIN",payload:{error:null,user:n,isAuthenticated:!0}}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0.response.data),a({type:"LOGIN",payload:{error:t.t0.response.data.error,info:null,isAuthenticated:!1,user:null}});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},q=function(){return function(){var e=Object(d.a)(p.a.mark((function e(t){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,R.a.defaults.withCredentials=!0,e.next=4,R()("/users/alluser");case 4:a=e.sent,r=a.data,t({type:"ALLUSER",payload:{users:r}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},A=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R()({method:"post",url:"/users/forgotpassword",data:{email:e.email}});case 3:r=t.sent,n=r.data,a({type:"FORGOTPASSWORD",payload:{useremail:e.email,info:n.message}}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("errtyu",t.t0.response.data),a({type:"FORGOTPASSWORD",payload:{error:t.t0.response.data.error,info:null}});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},I=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("user",e),t.prev=1,t.next=4,R()({method:"post",url:"/users/Changepassword",data:{resetToken:e.resetToken,password:e.password,email:e.email}});case 4:r=t.sent,n=r.data,console.log("data",n),a({type:"CHANGEPASSWORD",payload:{user:n,error:null}}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0.response.data),a({type:"CHANGEPASSWORD",payload:{error:t.t0.response.data.error,info:null}});case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},D=a(58),T=a.n(D),G=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",background:"#fff",padding:e.spacing(3),boxShadow:"0px 3px 3px -2px rgba(0,0,0,0.2), 0px 3px 4px 0px rgba(0,0,0,0.14), 0px 1px 8px 0px rgba(0,0,0,0.12)"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function F(){var e=G(),t=Object(N.d)((function(e){return e.userState})),a=Object(k.e)(),s=Object(N.c)(),c=Object(r.useState)({email:"",password:"",isSubmitting:!1}),o=Object(g.a)(c,2),i=o[0],l=o[1],u=function(e,t){l(Object(h.a)(Object(h.a)({},i),{},Object(f.a)({},e,t)))},m=function(){var e=Object(d.a)(p.a.mark((function e(r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),l(Object(h.a)(Object(h.a)({},i),{},{isSubmitting:!0})),e.next=4,s(U(i));case 4:l(Object(h.a)(Object(h.a)({},i),{},{isSubmitting:!1})),t.error||a.push("/");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(w.a,{component:"main",maxWidth:"xs"},n.a.createElement(E.a,null),n.a.createElement("div",{className:e.paper},n.a.createElement(O.a,{component:"h1",variant:"h5"},n.a.createElement("img",{src:T.a,alt:"user",style:{width:"100%"}})),n.a.createElement(O.a,{component:"h1",variant:"h5"},"Sign in"),n.a.createElement("form",{onSubmit:m,className:e.form,noValidate:!0},n.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:i.email,onChange:function(e){return u("email",e.target.value)}}),n.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:i.password,onChange:function(e){return u("password",e.target.value)}}),n.a.createElement(x.a,{item:!0,xs:!0,style:{float:"right"}},n.a.createElement(y.a,{href:"/#/forgotPassword",variant:"body2"},"Forgot password?")),t.error&&n.a.createElement(x.a,{item:!0,xs:12,className:"error"},n.a.createElement("div",{className:"error"},t.error)),n.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:i.isSubmitting},"Sign In"),n.a.createElement(x.a,{container:!0,justify:"center",className:"mt-2"},n.a.createElement(x.a,{item:!0},"Don't have an account?",n.a.createElement(y.a,{href:"/#/register",variant:"body2",className:"mt-2"},"Sign Up"))))))}var P=a(286),W=a(85),_=a.n(W),M=a(306),Q=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2),background:"#fff",boxShadow:"0px 3px 3px -2px rgba(0,0,0,0.2), 0px 3px 4px 0px rgba(0,0,0,0.14), 0px 1px 8px 0px rgba(0,0,0,0.12)"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},input:{marginBottom:"20px"}}}));function z(){var e=Q(),t=Object(N.d)((function(e){return e.userState})),a=Object(k.e)(),s=Object(N.c)(),c=Object(r.useState)({firstName:"",firstNameError:"",lastName:"",lastNameError:"",email:"",emailError:"",password:"",passwordError:"",isSubmitting:!1}),o=Object(g.a)(c,2),i=o[0],l=o[1],u=function(e,t){var a=Object(h.a)({},i);a[e]=t,"firstName"===e&&(a.firstNameError="",a.firstName.match(/^[a-z ,.'-]{3,150}$/i)||(a.firstNameError="firstName is not valid"),""===a.firstName.trim()&&(a.firstNameError="First name is required")),"lastName"===e&&(a.lastNameError="",a.lastName.match(/^[a-z ,.'-]{3,150}$/i)||(a.lastNameError="lastName is not valid"),""===a.lastName.trim()&&(a.lastNameError="Last name is required")),"email"===e&&(a.emailError="",a.email.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i)||(a.emailError="invalid email "),""===a.email.trim()&&(a.emailError="email is required")),"password"===e&&(a.passwordError="",a.password.length<5&&(a.passwordError="Can not be less than 5"),""===a.password.trim()&&(a.passwordError="password is required")),l(a)},m=function(){var e=Object(d.a)(p.a.mark((function e(r){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),""!==(n=Object(h.a)({},i)).firstName.trim()&&!n.firstNameError){e.next=6;break}return n.firstNameError=n.firstNameError||"first name is required",l(n),e.abrupt("return");case 6:if(""!==n.lastName.trim()&&!n.lastNameError){e.next=10;break}return n.lastNameError=n.lastNameError||"last name is required",l(n),e.abrupt("return");case 10:if(""!==n.email.trim()&&!n.emailError){e.next=14;break}return n.emailError=n.emailError||"email is required",l(n),e.abrupt("return");case 14:if(""!==n.password.trim()&&!n.passwordError){e.next=18;break}return n.passwordError=n.passwordError||"password is required",l(n),e.abrupt("return");case 18:return n.isSubmitting=!0,l(n),e.next=22,s(C(i));case 22:n.isSubmitting=!0,l(n),t.error||a.push("/login");case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(w.a,{component:"main",maxWidth:"xs"},n.a.createElement(E.a,null),n.a.createElement("div",{className:e.paper},n.a.createElement(O.a,{component:"h1",variant:"h5"},n.a.createElement("img",{src:T.a,alt:"user",style:{width:"100%"}})),n.a.createElement(O.a,{component:"h1",variant:"h5"},"Sign up"),n.a.createElement("form",{onSubmit:m,className:e.form,noValidate:!0},n.a.createElement(x.a,{container:!0,spacing:2},n.a.createElement(x.a,{item:!0,xs:12,sm:6},n.a.createElement(v.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",value:i.firstName,onChange:function(e){return u("firstName",e.target.value)},error:!!i.firstNameError,helperText:i.firstNameError})),n.a.createElement(x.a,{item:!0,xs:12,sm:6},n.a.createElement(v.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname",value:i.lastName,onChange:function(e){return u("lastName",e.target.value)},error:!!i.lastNameError,helperText:i.lastNameError})),n.a.createElement(x.a,{item:!0,xs:12},n.a.createElement(v.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:i.email,onChange:function(e){return u("email",e.target.value)},error:!!i.emailError,helperText:i.emailError})),n.a.createElement(x.a,{item:!0,xs:12},n.a.createElement(v.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:i.password,onChange:function(e){return u("password",e.target.value)},error:!!i.passwordError,helperText:i.passwordError})),n.a.createElement(x.a,{item:!0,xs:12},n.a.createElement(v.a,{accept:"image/*",id:"icon-button-file",type:"file",className:e.input,onChange:function(e){return u("photoURL",e.target.files[0])}}),n.a.createElement("label",{htmlFor:"icon-button-file"},n.a.createElement(M.a,{title:"Upload Photo"},n.a.createElement(P.a,{color:"primary","aria-label":"upload picture",component:"span"},n.a.createElement(_.a,null))))),t.error&&n.a.createElement(x.a,{item:!0,xs:12},n.a.createElement("div",{className:"error"},t.error))),n.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:i.isSubmitting},"Sign Up"),n.a.createElement(x.a,{container:!0,justify:"center",className:"mt-2"},n.a.createElement(x.a,{item:!0},"Already have an account?",n.a.createElement(y.a,{href:"/#/login",variant:"body2"},"Sign in"))))))}var B=a(307),H=a(86),J=a.n(H),V=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",background:"#fff",padding:e.spacing(3),boxShadow:"0px 3px 3px -2px rgba(0,0,0,0.2), 0px 3px 4px 0px rgba(0,0,0,0.14), 0px 1px 8px 0px rgba(0,0,0,0.12)"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),$=Object(N.b)((function(e){return{useremail:e.userState}}),{forgotPassword:A})((function(e){var t=V(),a=Object(k.e)(),s=Object(N.c)(),c=Object(r.useState)({email:"",isSubmitting:!1}),o=Object(g.a)(c,2),i=o[0],l=o[1],u=function(){var t=Object(d.a)(p.a.mark((function t(r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("state",i),r.preventDefault(),l(Object(h.a)(Object(h.a)({},i),{},{isSubmitting:!0})),t.next=5,s(A(i));case 5:l(Object(h.a)(Object(h.a)({},i),{},{isSubmitting:!1})),console.log(e.useremail.error),e.useremail.error||a.push("/Resetpassword/"+i.email);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return n.a.createElement(w.a,{component:"main",maxWidth:"xs"},n.a.createElement(E.a,null),n.a.createElement("div",{className:t.paper},n.a.createElement(B.a,{className:t.avatar},n.a.createElement(J.a,null)),n.a.createElement(O.a,{component:"h1",variant:"h5"},"Forgot Password"),n.a.createElement("form",{className:t.form,noValidate:!0,onSubmit:u},n.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:i.email,onChange:function(e){return t="email",a=e.target.value,void l(Object(h.a)(Object(h.a)({},i),{},Object(f.a)({},t,a)));var t,a}}),n.a.createElement(x.a,null,n.a.createElement("div",{className:"error"},e.useremail.error)),n.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,disabled:i.isSubmitting},"Send Reset Link"),n.a.createElement(x.a,{container:!0},n.a.createElement(x.a,{item:!0,xs:!0}),n.a.createElement(x.a,{item:!0},"Back to",n.a.createElement(y.a,{href:"/#/login",variant:"body2",className:"mt-2"}," Sign in"))))))})),X=a(3),Y=a(17),K=a(26),Z=a(310),ee=a(287),te=a(288),ae=a(282),re=a(293),ne=a(151),se=a.n(ne),ce=a(150),oe=a.n(ce),ie=a(233),le=a(294),ue=a(152),me=a.n(ue),pe=a(154),de=a.n(pe),fe=a(153),he=a.n(fe),ge=a(158),be=a(292),Ee=a(25),ve=a(149),ye=a.n(ve),xe=a(309),Oe=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R()({method:"post",url:"/group",data:{groupName:e.groupName,photoURL:e.photoURL}});case 3:r=t.sent,n=r.data,a({type:"CREATEGROUP",payload:{error:null,group:n}}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),a({type:"CREATEGROUP",payload:{error:t.t0.response.data.error,group:null}});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},je=function(){return function(){var e=Object(d.a)(p.a.mark((function e(t){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R()("/group/find");case 3:a=e.sent,r=a.data,t({type:"FINDGROUP",payload:r}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response.data),t({type:"FINDGROUP",payload:{error:e.t0.response.data.error,group:null}});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},we=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R()({method:"post",url:"/users/search",data:e});case 3:r=t.sent,n=r.data,a({type:"SEARCHUSER",payload:{searchQuery:n}}),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),console.log(t.t0.response.data),a({type:"SEARCHUSER",payload:{error:t.t0.response.data.error,payload:null}});case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},ke=a(289),Ne=a(20),Se=a.n(Ne),Re=a(290),Ce=a(291),Le=Object(j.a)((function(e){return{root:{display:"flex",height:"70px"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(f.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(h.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)},menuLogo:{display:"flex",alignItems:"center"},user:{textTransform:"uppercase",background:"#fff",color:"#000",borderRadius:"50%",width:"38px",height:"38px",display:"flex",alignItems:"center",fontSize:"1.3rem"},search:Object(f.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Y.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Y.c)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"500px"},inputInput:Object(f.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width")},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}}),rootclick:{position:"relative"},dropdown:{position:"absolute",right:0,left:0,zIndex:1,padding:"8px",border:"1px solid",backgroundColor:"#3f51b5",color:"black",borderBottomLeftRadius:"8px",borderBottomRightRadius:"8px"}}}));var Ue=Object(N.b)((function(e){return{user:e.userState.user,isAuth:e.isAuthenticated,group:e.groupReducer,userState:e.userState}}),{logout:function(){return function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R()({method:"delete",url:"/users/logout"});case 3:t({type:"LOGOUT",payload:null}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},searchUser:we})((function(e){var t,a,s=Le(),c=Object(K.a)(),o=Object(k.e)(),i=n.a.useState(!1),l=Object(g.a)(i,2),u=l[0],m=l[1],b=n.a.useState(!1),v=Object(g.a)(b,2),y=v[0],j=v[1],w=n.a.useState(null),N=Object(g.a)(w,2),S=N[0],R=N[1],C=Object(r.useState)({searchQuery:"",searchQueryResult:null,users:null}),L=Object(g.a)(C,2),U=L[0],q=L[1],A=function(){R(null)},I=function(){var t=Object(d.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.logout();case 2:o.push("/login");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){e.userState.isAuthenticated||o.push("/login")}),[e,o]);var D=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),j((function(e){return!e})),t.next=4,e.searchUser({searchQuery:U.searchQuery});case 4:q(Object(h.a)(Object(h.a)({},U),{},{searchQueryResult:e.group.searchQuery}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),G=function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.push("/user/".concat(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:s.root},n.a.createElement(E.a,null),n.a.createElement(ee.a,{position:"fixed",className:Object(X.a)(s.appBar,Object(f.a)({},s.appBarShift,u))},n.a.createElement(te.a,{style:{justifyContent:"space-between"}},n.a.createElement("div",{className:s.menuLogo},n.a.createElement(O.a,{variant:"h6",noWrap:!0,style:{width:"50px",height:"50px",borderRadius:"50%"}},n.a.createElement(Ee.b,{to:"/",style:{textDecoration:"none"}},n.a.createElement("img",{src:T.a,alt:"user",style:{width:"100%",cursor:"pointer"}}))),n.a.createElement("form",{className:s.search,style:{marginLeft:"100px"},onSubmit:D},n.a.createElement("div",{className:s.searchIcon},n.a.createElement(ye.a,{type:"submit"})),n.a.createElement(xe.a,{placeholder:"Search\u2026",classes:{root:s.inputRoot,input:s.inputInput},value:U.searchQuery,inputProps:{"aria-label":"search"},onChange:function(e){return t="searchQuery",a=e.target.value,void q(Object(h.a)(Object(h.a)({},U),{},Object(f.a)({},t,a)));var t,a}}),n.a.createElement(ke.a,{onClickAway:function(){j(!1),q(Object(h.a)(Object(h.a)({},U),{},{searchQuery:""}))}},n.a.createElement("div",{className:s.rootclick},n.a.createElement("div",null,y?n.a.createElement("div",{className:s.dropdown},n.a.createElement(x.a,{style:{margin:"10px 0"},container:!0,direction:"column"},U.searchQueryResult&&U.searchQueryResult.map((function(e){return n.a.createElement(x.a,{item:!0,key:e._id,onClick:function(){return G(e._id)}},n.a.createElement(M.a,{title:"click for seen user Details","aria-label":"add"},n.a.createElement(Re.a,{style:{cursor:"pointer"}},n.a.createElement(Ce.a,{avatar:n.a.createElement(B.a,{alt:"user",src:e.photoURL||Se.a}),title:e.firstName+" "+e.lastName}))))})))):null))))),e.user&&n.a.createElement("div",null,n.a.createElement(P.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){R(e.currentTarget)},color:"inherit"},n.a.createElement("div",null),e.user.photoURL?n.a.createElement("img",{src:e.user.photoURL,alt:e.user.firstName,className:s.user}):n.a.createElement("span",{className:s.user,style:{padding:4}},e.user.firstName[0],e.user.lastName[0])),n.a.createElement(ge.a,{id:"simple-menu",anchorEl:S,keepMounted:!0,open:Boolean(S),onClose:A},n.a.createElement(be.a,{onClick:A},n.a.createElement(Ee.b,{to:"/profile",style:{color:"black",textDecoration:"none"}},"Profile")),n.a.createElement(be.a,{onClick:I},"Logout"))))),n.a.createElement(Z.a,{variant:"permanent",className:Object(X.a)(s.drawer,(t={},Object(f.a)(t,s.drawerOpen,u),Object(f.a)(t,s.drawerClose,!u),t)),classes:{paper:Object(X.a)((a={},Object(f.a)(a,s.drawerOpen,u),Object(f.a)(a,s.drawerClose,!u),a))}},n.a.createElement("div",{className:s.toolbar},n.a.createElement(P.a,{onClick:function(){m(!1)}},"rtl"===c.direction?n.a.createElement(oe.a,null):n.a.createElement(se.a,null))),n.a.createElement(re.a,null),n.a.createElement(ae.a,null,n.a.createElement(ie.a,{button:!0},n.a.createElement(Ee.b,{to:"/",style:{textDecoration:"none"}},n.a.createElement(le.a,{style:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:"30px"}},n.a.createElement(me.a,null),n.a.createElement(O.a,{variant:"body2"},"Home")))),n.a.createElement(ie.a,{button:!0},n.a.createElement(Ee.b,{to:"/friend",style:{textDecoration:"none"}},n.a.createElement(le.a,{style:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:"30px"}},n.a.createElement(he.a,null),n.a.createElement(O.a,{variant:"body2"},"Friend")))),n.a.createElement(ie.a,{button:!0},n.a.createElement(Ee.b,{to:"/group",style:{textDecoration:"none"}},n.a.createElement(le.a,{style:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:"30px"}},n.a.createElement(de.a,null),n.a.createElement(O.a,{variant:"body2"},"Group")))))),n.a.createElement("main",{className:s.content},n.a.createElement("div",{className:s.toolbar})))})),qe=a(296),Ae=a(295),Ie=a(110),De=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.prev=1,t.next=4,R()({method:"post",url:"/request",data:e});case 4:r=t.sent,n=r.data,a({type:"REQUEST",payload:{error:null,request:n}}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0),a({type:"REQUEST",payload:{error:t.t0.response.data.error,request:null}});case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},Te=a(308),Ge=a(305),Fe=a(297),Pe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={users:null,snackbarOpen:!1,snackbarMessage:"",snackbarSeverity:"success"},e.connect=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.sendRequest({receiver:a,sender:e.props.userState.user.id});case 2:e.props.request.error?e.setState({snackbarOpen:!0,snackbarMessage:e.props.request.error,snackbarSeverity:"error"}):e.setState({snackbarOpen:!0,snackbarMessage:e.props.request.request.message});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.acceptGroupRequest=function(){var t=Object(d.a)(p.a.mark((function t(a,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.updatetRequest({isAccepted:!0,id:a,groupId:r});case 2:return e.setState({snackbarOpen:!0,snackbarMessage:"Accept request successfully"}),t.next=5,e.props.allRequest();case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.Accept=function(){var t=Object(d.a)(p.a.mark((function t(a,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.updatetRequest({isAccepted:!0,id:a,friend:r});case 2:return e.setState({snackbarOpen:!0,snackbarMessage:"Accept request successfully"}),t.next=5,e.props.allRequest();case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.Reject=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.updatetRequest({isReject:!0,id:a});case 2:return e.setState({snackbarOpen:!0,snackbarMessage:"Reject request successfully",snackbarSeverity:"error"}),t.next=5,e.props.allRequest();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showSnackbar=function(){return n.a.createElement(Te.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:e.state.snackbarOpen,onClose:function(){e.setState({snackbarOpen:!1})},autoHideDuration:3e3},n.a.createElement(Ge.a,{severity:e.state.snackbarSeverity,variant:"filled"},e.state.snackbarMessage))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.userState.user){e.next=10;break}if(this.props.userState.users){e.next=4;break}return e.next=4,this.props.allUser();case 4:return e.next=6,this.props.allRequest();case 6:return this.setState({users:this.props.userState.users}),e.next=9,this.props.updatetRequest();case 9:console.log(this.props,"user");case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"backgrnd-home",style:{marginLeft:"100px"}},n.a.createElement(Ue,null),this.state.users?n.a.createElement("div",{className:"row"},n.a.createElement(x.a,{container:!0},n.a.createElement(x.a,{container:!0,item:!0,spacing:3,xs:12,sm:12,md:8},this.state.users&&this.state.users.map((function(t){return n.a.createElement(x.a,{item:!0,xs:12,sm:4,key:t._id},n.a.createElement(Re.a,{style:{maxWidth:"200px"},className:"col-2"},n.a.createElement(Ae.a,{className:"user-image",component:"img",image:t.photoURL||Se.a,title:"user image"}),n.a.createElement(qe.a,{style:{justifyContent:"center",flexDirection:"column"}},n.a.createElement(O.a,{style:{fontWeight:"bold"}},t.firstName+" "+t.lastName),n.a.createElement(b.a,{variant:"outlined",color:"primary",onClick:function(){return e.connect(t._id)}},"connect"))))}))),n.a.createElement(x.a,{item:!0,xs:12,sm:12,md:4},n.a.createElement(Ie.a,{style:{padding:"1rem"}},n.a.createElement("div",{style:{textAlign:"center"}},n.a.createElement("h3",null,"Requests"),this.props.request.requests.length>0?n.a.createElement("div",null,this.props.request.requests&&this.props.request.requests.map((function(t){return n.a.createElement(Ie.a,{key:t._id,style:{margin:"10px",padding:"0 10px"}},t.sender&&n.a.createElement(x.a,{container:!0,spacing:1,justify:"space-between",alignItems:"center"},n.a.createElement(x.a,{item:!0},n.a.createElement("img",{alt:"user",src:t.sender.photoURL||Se.a,style:{width:"40px",height:"40px",borderRadius:"50px"}})),n.a.createElement(x.a,{item:!0},t.sender.firstName+" "+t.sender.lastName),n.a.createElement(x.a,{item:!0},n.a.createElement(b.a,{size:"small",color:"primary",className:"request-btn",variant:"contained",onClick:function(){return e.Accept(t._id,t.sender._id)}},"Accept")),n.a.createElement(x.a,{item:!0},n.a.createElement(b.a,{size:"small",className:"request-btn",color:"secondary",variant:"contained",onClick:function(){return e.Reject(t._id)}},"Reject"))),t.groupId&&n.a.createElement(x.a,{container:!0,spacing:1,justify:"space-between",alignItems:"center"},n.a.createElement(x.a,{item:!0},n.a.createElement("img",{alt:"user",src:t.groupId.photoURL||Se.a,style:{width:"40px",height:"40px",borderRadius:"50px"}})),n.a.createElement(x.a,{item:!0},t.groupId.groupName),n.a.createElement(x.a,{item:!0},n.a.createElement(b.a,{size:"small",color:"primary",variant:"contained",onClick:function(){return e.acceptGroupRequest(t._id,t.groupId._id)}},"Accept")),n.a.createElement(x.a,{item:!0},n.a.createElement(b.a,{size:"small",color:"secondary",variant:"contained",onClick:function(){return e.Reject(t._id)}},"Reject"))))}))):n.a.createElement("div",null,"No request")))))):n.a.createElement("div",{className:"loader"},n.a.createElement(Fe.a,null)),this.showSnackbar())}}]),a}(r.Component),We=Object(N.b)((function(e){return{userState:e.userState,request:e.requestReducer}}),{allUser:q,sendRequest:De,allRequest:function(){return function(){var e=Object(d.a)(p.a.mark((function e(t){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R()("/request/all");case 3:a=e.sent,r=a.data,t({type:"ALLREQUEST",payload:{requests:r}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},updatetRequest:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R()({method:"put",url:"/request/update",data:e});case 3:r=t.sent,n=r.data,a({type:"UPDATEREQUEST",payload:{error:null,update:n}}),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),console.log(t.t0.response.data),a({type:"UPDATEREQUEST",payload:{error:t.t0.response.data.error,request:null}});case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}})(Pe),_e=a(234),Me=a(155),Qe=a.n(Me),ze=Object(j.a)((function(e){return{input:{display:"none"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),Be=Object(N.b)((function(e){return{user:e.userState.user,isAuth:e.isAuthenticated}}))((function(e){var t,a=ze(),s=Object(N.d)((function(e){return e.userState})),c=Object(k.e)(),o=Object(N.c)(),i=Object(r.useState)({userId:null===e||void 0===e?void 0:e.user.id,token:null===e||void 0===e?void 0:e.user.token,firstName:null===e||void 0===e?void 0:e.user.firstName,lastName:null===e||void 0===e?void 0:e.user.lastName,email:null===e||void 0===e?void 0:e.user.email,isSubmitting:!1,photoURL:null}),l=Object(g.a)(i,2),u=l[0],m=l[1],f=function(e,t){var a=Object(h.a)({},u);a[e]=t,m(a)},y=function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(u),t.preventDefault(),u.photoURL||u.firstName||u.lastName){e.next=4;break}return e.abrupt("return");case 4:return(a=Object(h.a)({},u)).isSubmitting=!0,m(a),e.next=9,o(L(u));case 9:a.isSubmitting=!1,a.photoURL=null,m(a),s.error||c.push("/profile");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(a=Object(h.a)({},u)).isSubmitting=!0,m(a),e.next=6,o(L(u));case 6:a.isSubmitting=!1,a.photoURL=null,m(a),s.error||c.push("/profile");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return e.user&&n.a.createElement("div",null,n.a.createElement(Ue,null),n.a.createElement("main",{className:"backgrnd",style:{marginLeft:"100px",textAlign:"center",marginTop:"50px "}},n.a.createElement("div",{style:{marginBottom:"40px"}},u.photoURL?n.a.createElement("img",{src:URL.createObjectURL(u.photoURL),style:{borderRadius:"50%",width:"200px",height:"200px"},alt:e.user.firstName}):(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.photoURL)?n.a.createElement("img",{src:e.user.photoURL,style:{borderRadius:"50%",width:"200px",height:"200px"},alt:e.user.firstName}):n.a.createElement("span",{style:{background:"gray",borderRadius:"50%",width:"50%",height:"50%",padding:"40px",color:"#000",fontSize:"50px",textTransform:"uppercase"}},e.user.firstName[0],e.user.lastName[0])),n.a.createElement(w.a,{component:"main",maxWidth:"xs"},n.a.createElement(E.a,null),n.a.createElement(M.a,{title:"Remove Photo"},n.a.createElement(P.a,{color:"secondary","aria-label":"upload picture",component:"span",disabled:u.isSubmitting,onClick:O},n.a.createElement(Qe.a,null))),n.a.createElement("h3",null,"wish to update details.."),n.a.createElement("h3",null,"Please edit Below.."),n.a.createElement("form",{onSubmit:y,noValidate:!0},n.a.createElement(x.a,{item:!0,xs:12},n.a.createElement("input",{accept:"image/*",id:"icon-button-file",type:"file",className:a.input,onChange:function(e){return f("photoURL",e.target.files[0])}}),n.a.createElement("label",{htmlFor:"icon-button-file"},n.a.createElement(M.a,{title:"Upload Photo"},n.a.createElement(P.a,{color:"primary","aria-label":"upload picture",component:"span"},n.a.createElement(_.a,null))))),n.a.createElement(x.a,{container:!0,spacing:2},n.a.createElement(x.a,{item:!0,xs:12},n.a.createElement(v.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",value:u.firstName,onChange:function(e){return f("firstName",e.target.value)},error:!!u.firstNameError,helperText:u.firstNameError})),n.a.createElement(x.a,{item:!0,xs:12},n.a.createElement(v.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname",value:u.lastName,onChange:function(e){return f("lastName",e.target.value)},error:!!u.lastNameError,helperText:u.lastNameError}))),n.a.createElement(b.a,{type:"submit",variant:"contained",color:"primary",style:{margin:"10px"},disabled:u.isSubmitting},"Update Details"))),n.a.createElement("h3",null,"Name: ",e.user.firstName+" "+e.user.lastName),n.a.createElement("h3",null,"Email: ",e.user.email)),n.a.createElement(_e.a,{className:a.backdrop,open:u.isSubmitting},n.a.createElement(Fe.a,{color:"inherit"})))})),He=Object(j.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",background:"#fff",padding:e.spacing(3),boxShadow:"0px 3px 3px -2px rgba(0,0,0,0.2), 0px 3px 4px 0px rgba(0,0,0,0.14), 0px 1px 8px 0px rgba(0,0,0,0.12)"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),Je=Object(N.b)((function(e){return console.log(e),{user:e.userState}}),{changePassword:I})((function(e){var t=He(),a=Object(k.e)(),s=Object(N.c)(),c=Object(r.useState)({resetToken:"",password:"",isSubmitting:!1,email:e.match.params.email}),o=Object(g.a)(c,2),i=o[0],l=o[1],u=function(e,t){l(Object(h.a)(Object(h.a)({},i),{},Object(f.a)({},e,t)))},m=function(){var t=Object(d.a)(p.a.mark((function t(r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),l(Object(h.a)(Object(h.a)({},i),{},{isSubmitting:!0})),t.next=4,s(I(i));case 4:l(Object(h.a)(Object(h.a)({},i),{},{isSubmitting:!1})),e.user.error||a.push("/login");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return n.a.createElement(w.a,{component:"main",maxWidth:"xs"},n.a.createElement(E.a,null),n.a.createElement("div",{className:t.paper},n.a.createElement(B.a,{className:t.avatar},n.a.createElement(J.a,null)),n.a.createElement(O.a,{component:"h1",variant:"h5"},"Reset Password"),n.a.createElement("form",{className:t.form,noValidate:!0,onSubmit:m},n.a.createElement(x.a,null,n.a.createElement("h2",null," ",e.match.params.email)),n.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"resetToken",label:"resetToken",type:"resetToken",id:"resetToken",autoComplete:"resetToken",value:i.resetToken,onChange:function(e){return u("resetToken",e.target.value)}}),n.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:i.password,onChange:function(e){return u("password",e.target.value)}}),n.a.createElement(x.a,null,n.a.createElement("div",{className:"error"},e.user.error)),n.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Change Password"),n.a.createElement(x.a,{container:!0},n.a.createElement(x.a,{item:!0,xs:!0}),n.a.createElement(x.a,{item:!0},"Back to",n.a.createElement(y.a,{href:"/",variant:"body2",className:"mt-2"}," Sign in"))))))})),Ve=a(109),$e=a(33),Xe=a(298),Ye=a(89),Ke=a.n(Ye),Ze=a(91),et=a.n(Ze),tt=a(87),at=a(281),rt=a(88),nt=a.n(rt),st=a(90),ct=a.n(st),ot=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={friends:null,selectFriend:null,message:"",messages:[],user:e.props.user.user,loading:!1,openemoji:!1,chosenEmoji:null},e.messageRef=n.a.createRef(),e.socket=null,e.sendMessage=function(){var t=Object(d.a)(p.a.mark((function t(a){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),r={name:e.state.user.firstName+" "+e.state.user.lastName,photoURL:e.state.user.photoURL||null,sender:e.state.user.id,message:e.state.message,socketId:e.state.selectFriend.socketId,receiver:e.state.selectFriend._id},e.state.message&&(e.socket.emit("one-2-one",r),e.setState(Object(h.a)(Object(h.a)({},e.state),{},{message:""})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderCards=function(){console.log("inside renderrrr",e.props.chats),e.props.chats.chats&&e.props.chats.chats.chats.map((function(e){return{}}))},e.handleFrndChat=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.unread=0,t.next=3,e.setState({selectFriend:a});case 3:return e.setState({loading:!0}),t.next=6,e.props.singleChat(a._id);case 6:return t.next=8,e.setState({messages:e.props.chats.singleMessages});case 8:return t.next=10,e.setState({loading:!1});case 10:e.scrollToBottom();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onChangeHandler=function(t){console.log(t.target.files[0]);var a={name:e.state.user.firstName+" "+e.state.user.lastName,photoURL:e.state.user.photoURL||null,sender:e.state.user.id,file:t.target.files[0],fileName:t.target.files[0].name,type:t.target.files[0].type,socketId:e.state.selectFriend.socketId,receiver:e.state.selectFriend._id};e.socket.emit("single-fileupload",a)},e.handleClickEmoji=function(){e.setState({openemoji:!0})},e.handleClickAwayEmoji=function(){e.setState({openemoji:!1})},e.onEmojiClick=function(){var t=Object(d.a)(p.a.mark((function t(a,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState(Object(h.a)(Object(h.a)({},e.state),{},{message:e.state.message+r.emoji}));case 2:e.setState({chosenEmoji:!1});case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.scrollToBottom=function(){e.messageRef.current&&e.messageRef.current.scrollIntoView()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.allFriends();case 2:return e.next=4,this.setState({friends:this.props.friend.friends.friends});case 4:this.socket=tt("/"),this.socket.emit("user-join",this.props.user.user.id),this.socket.on("user-join",function(){var e=Object(d.a)(p.a.mark((function e(a){var r,n,s,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Object($e.a)(t.state.friends),n=Object(Ve.a)(r);try{for(n.s();!(s=n.n()).done;)(c=s.value).unread=0,c._id===a.userId&&(c.socketId=a.socketId)}catch(o){n.e(o)}finally{n.f()}return e.next=5,t.setState({friends:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.socket.on("one-2-one",(function(e){if(e.sender===t.state.user.id||t.state.selectFriend&&t.state.selectFriend._id===e.sender){var a=Object($e.a)(t.state.messages);a.push(e),t.setState({messages:a})}else{var r,n=Object($e.a)(t.state.friends),s=Object(Ve.a)(n);try{for(s.s();!(r=s.n()).done;){var c=r.value;c._id===e.sender&&(c.unread=c.unread?c.unread+1:1)}}catch(o){s.e(o)}finally{s.f()}t.setState({friends:n})}t.scrollToBottom()}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"handleSave",value:function(e){this.setState({files:e,open:!1}),console.log(e)}},{key:"handleOpen",value:function(){this.setState({open:!0})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"backgrnd",style:{marginLeft:"100px"}},n.a.createElement(Ue,null),this.state.friends?n.a.createElement(x.a,{container:!0},n.a.createElement(x.a,{item:!0,sm:3},n.a.createElement("div",{className:"friend-list"},n.a.createElement(x.a,{container:!0,direction:"column",alignItems:"flex-start"},this.state.friends&&this.state.friends.map((function(t){return n.a.createElement(x.a,{item:!0,key:t._id,style:{margin:"10px 0"}},n.a.createElement(Re.a,{className:"backgrnd",onClick:function(){return e.handleFrndChat(t)},style:e.state.selectFriend&&e.state.selectFriend._id===t._id?{backgroundColor:"#bbb"}:{cursor:"pointer"}},n.a.createElement(Ce.a,{avatar:n.a.createElement(B.a,{alt:"user",src:t.photoURL||Se.a}),title:t.firstName+" "+t.lastName,action:n.a.createElement("span",{className:"unread"},t.unread>0&&t.unread),subheader:n.a.createElement("div",null,"Last seen:",new Date(t.updatedAt).toLocaleTimeString())})))}))))),n.a.createElement(x.a,{item:!0,sm:9},n.a.createElement("div",null,this.state.selectFriend?n.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},n.a.createElement(ee.a,{position:"relative",style:{background:"#37474f"}},n.a.createElement(te.a,null,n.a.createElement(O.a,{variant:"h6",className:"title",noWrap:!0},n.a.createElement(Ce.a,{avatar:n.a.createElement(B.a,{alt:"user",src:this.state.selectFriend.photoURL||Se.a}),title:this.state.selectFriend.firstName+" "+this.state.selectFriend.lastName,subheader:n.a.createElement("div",{className:"time"},"Last seen:",new Date(this.state.selectFriend.updatedAt).toLocaleTimeString()+" "+new Date(this.state.selectFriend.updatedAt).toLocaleDateString())})),n.a.createElement(M.a,{title:"Share documents","aria-label":"add"},n.a.createElement(Xe.a,{size:"small",style:{marginRight:"8px"}},n.a.createElement("input",{accept:"image/*,video/*,application/pdf",className:"input",id:"icon-button-file",type:"file",onChange:this.onChangeHandler}),n.a.createElement("label",{htmlFor:"icon-button-file"},n.a.createElement(P.a,{type:"file","aria-label":"upload picture",component:"span"},n.a.createElement(Ke.a,null))))))),n.a.createElement("div",{className:"chat-box"},n.a.createElement(x.a,{className:"messages"},this.state.loading&&n.a.createElement("div",{className:"loader"},n.a.createElement(Fe.a,null)),this.state.messages.map((function(t){return n.a.createElement(x.a,{item:!0,xs:12,key:t._id,style:{padding:"8px"},ref:e.messageRef},n.a.createElement("div",{className:"message"},n.a.createElement(B.a,{className:"message-photo",src:t.photoURL||Se.a,alt:"message"}),n.a.createElement("div",{className:"message-name"},t.name)),t.file?n.a.createElement(n.a.Fragment,null,-1!==(null===t||void 0===t?void 0:t.type.indexOf("video"))?n.a.createElement("video",{width:"320",height:"240",controls:!0,autoPlay:!0},n.a.createElement("source",{src:"/uploads/".concat(t.file),type:t.type})):-1!==(null===t||void 0===t?void 0:t.type.indexOf("pdf"))||-1!==(null===t||void 0===t?void 0:t.type.indexOf("text"))?n.a.createElement("div",{className:"message-content"},n.a.createElement("a",{className:"send-link",target:"_blank",rel:"noopener noreferrer",href:"/uploads/"+t.file},t.fileName||"open pdf")):n.a.createElement("img",{className:"message-file",src:"/uploads/".concat(t.file),alt:t.file})):n.a.createElement("div",{className:"message-content"},t.message))}))),n.a.createElement("form",{className:"message-form",onSubmit:this.sendMessage},n.a.createElement(x.a,{container:!0},n.a.createElement(x.a,{item:!0,xs:1,sm:1},n.a.createElement("div",null,n.a.createElement(ke.a,{onClickAway:this.handleClickAwayEmoji},n.a.createElement("div",null,n.a.createElement(ct.a,{onClick:this.handleClickEmoji,style:{cursor:"pointer"}}),this.state.openemoji?n.a.createElement(at.a,null,n.a.createElement("div",{className:"emoji-class"},n.a.createElement(nt.a,{onEmojiClick:this.onEmojiClick}))):null)))),n.a.createElement(x.a,{item:!0,xs:9,sm:10},n.a.createElement(v.a,{fullWidth:!0,name:"message",variant:"outlined",autoComplete:"off",size:"small",value:this.state.message,onChange:function(t){return e.setState({message:t.target.value})}})),n.a.createElement(x.a,{item:!0,xs:2,sm:1},n.a.createElement(Xe.a,{style:{width:"40px",height:"40px"},type:"submit"},n.a.createElement(et.a,null))))))):n.a.createElement("div",null,0===this.state.friends.length?n.a.createElement("h1",null,"You don't have any friend."):n.a.createElement("h1",null,"Click on any friend to start conversation."))))):n.a.createElement("div",{className:"loader"},n.a.createElement(Fe.a,null)))}}]),a}(r.Component),it=Object(N.b)((function(e){return{friend:e.requestReducer,user:e.userState,chats:e.chatReducer}}),{allFriends:function(){return function(){var e=Object(d.a)(p.a.mark((function e(t){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R()("/users/friend");case 3:a=e.sent,r=a.data,t({type:"FRIENDS",payload:{friends:r}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},singleChat:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,R.a.defaults.withCredentials=!0,t.next=4,R()("/chat/single/".concat(e));case 4:r=t.sent,n=r.data,a({type:"SINGLECHAT",payload:{singleMessages:n}}),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),console.log(t.t0.response.data),a({type:"SINGLECHAT",payload:{error:t.t0.response.data.error,group:null}});case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}})(ot),lt=a(299),ut=a(303),mt=a(301),pt=a(302),dt=a(300),ft=a(156),ht=a.n(ft),gt=Object(j.a)((function(e){return{root:{flexGrow:1,width:"100%"},root1:{display:"flex",justifyContent:"center",height:"100vh",alignItems:"center"},title:Object(f.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(f.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Y.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Y.c)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(f.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}}),input:{display:"none"},dropdown:{position:"fixed",width:200,top:"50%",left:"50%",transform:"translate(-50%, -50%)",border:"1px solid",padding:e.spacing(1),backgroundColor:e.palette.background.paper}}})),bt=Object(N.b)((function(e){return{userState:e.userState,group:e.groupReducer,request:e.requestReducer,chat:e.chatReducer}}),{createGroup:Oe,findGroups:je,searchUser:we,sendRequest:De,allMessage:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,R.a.defaults.withCredentials=!0,t.next=4,R()("/chat/".concat(e));case 4:r=t.sent,n=r.data,a({type:"ALLMESSAGE",payload:{messages:n}}),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),console.log(t.t0.response.data),a({type:"ALLMESSAGE",payload:{error:t.t0.response.data.error,group:null}});case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=Object(r.useRef)(),a=gt(),s=n.a.useState(!1),c=Object(g.a)(s,2),o=c[0],i=c[1],l=n.a.useState(!1),u=Object(g.a)(l,2),m=u[0],E=u[1],y=n.a.useState(!1),j=Object(g.a)(y,2),w=j[0],k=j[1],S=Object(N.c)(),R=Object(r.useState)({groupName:null,isSubmitting:null,photoURL:null,searchQuery:null,searchQueryResult:null,selectedGroup:null,snackbarOpen:!1,snackbarMessage:"",snackbarSeverity:"success",user:e.userState.user,message:""}),C=Object(g.a)(R,2),L=C[0],U=C[1],q=function(){var e=Object(d.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(Object(h.a)(Object(h.a)({},L),{},{message:L.message+a.emoji}));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),A=Object(r.useState)(!1),I=Object(g.a)(A,2),D=I[0],T=I[1],G=Object(r.useState)([]),F=Object(g.a)(G,2),W=F[0],_=F[1],Q=tt("/"),z=function(){E(!1)},H=function(){k(!1)},J=function(e,t){U(Object(h.a)(Object(h.a)({},L),{},Object(f.a)({},e,t)))},V=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return U(Object(h.a)(Object(h.a)({},L),{},{isSubmitting:!0})),t.next=3,S(Oe(L));case 3:U(Object(h.a)(Object(h.a)({},L),{},{isSubmitting:!1})),e.findGroups(),E(!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),$=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.searchUser({searchQuery:L.searchQuery});case 2:U(Object(h.a)(Object(h.a)({},L),{},{searchQueryResult:e.group.searchQuery}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),X=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.sendRequest({receiver:a,groupId:L.selectedGroup._id});case 2:e.request.error?U(Object(h.a)(Object(h.a)({},L),{},{snackbarOpen:!0,snackbarMessage:e.request.error,snackbarSeverity:"error"})):U(Object(h.a)(Object(h.a)({},L),{},{snackbarOpen:!0,snackbarMessage:e.request.request.message})),k(!1),setTimeout((function(){U(Object(h.a)(Object(h.a)({},L),{},{selectedGroup:L.selectedGroup}))}),2e3);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){S(je())}),[S]),Q.on("message",(function(e){_((function(t){return t.concat(e)})),Z()}));var Y=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return U(Object(h.a)(Object(h.a)({},L),{},{selectedGroup:a})),T(!0),t.next=4,e.allMessage(a._id);case 4:_(e.chat.messages),T(!1),Q.emit("join",a._id),Z();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),K=function(){var e=Object(d.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a={name:L.user.firstName+" "+L.user.lastName,photoURL:L.user.photoURL||null,sender:L.user.id,message:L.message,groupId:L.selectedGroup._id},L.message&&(Q.emit("message",a),U(Object(h.a)(Object(h.a)({},L),{},{message:""})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){t.current&&t.current.scrollIntoView()};return n.a.createElement("div",{className:"backgrnd",style:{marginLeft:"100px"}},n.a.createElement(Ue,null),e.group.groups?n.a.createElement(x.a,{container:!0},n.a.createElement(x.a,{item:!0,sm:3,style:{marginTop:"25px"}},n.a.createElement(b.a,{variant:"outlined",color:"primary",onClick:function(){E(!0)}},"Create a New Group"),n.a.createElement(lt.a,{open:m,onClose:z,"aria-labelledby":"form-dialog-title"},n.a.createElement(dt.a,{id:"form-dialog-title"},"New Group"),n.a.createElement(mt.a,null,n.a.createElement(pt.a,null,"To create a new group"),n.a.createElement(v.a,{autoFocus:!0,margin:"dense",id:"Group name",label:" Group name",type:"text",fullWidth:!0,required:!0,onChange:function(e){return J("groupName",e.target.value)}}),n.a.createElement(v.a,{margin:"dense",id:"group logo",label:" Group logo",type:"text",fullWidth:!0,required:!0,onChange:function(e){return J("photoURL",e.target.value)}})),n.a.createElement(ut.a,null,n.a.createElement(b.a,{onClick:z,color:"primary"},"Cancel"),n.a.createElement(b.a,{onClick:V,disabled:L.isSubmitting||!(L.photoURL&&L.groupName),color:"primary"},"Done"))),n.a.createElement("div",{className:"group-list"},n.a.createElement(x.a,{container:!0,direction:"column",alignItems:"flex-start"},e.group.groups&&e.group.groups.map((function(e){return n.a.createElement(x.a,{item:!0,key:e._id,style:{margin:"10px 0"}},n.a.createElement(Re.a,{onClick:function(){return Y(e)},style:L.selectedGroup&&L.selectedGroup._id===e._id?{backgroundColor:"#ccc"}:{cursor:"pointer"}},n.a.createElement(Ce.a,{avatar:n.a.createElement(B.a,{alt:"user",src:e.photoURL||Se.a}),title:e.groupName,subheader:n.a.createElement("div",null,"Created Date:",new Date(e.createdAt).toLocaleDateString())})))}))))),n.a.createElement(x.a,{item:!0,sm:9},L.selectedGroup?n.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},n.a.createElement(ee.a,{position:"relative",style:{background:"#37474f"}},n.a.createElement(te.a,null,n.a.createElement(O.a,{className:a.title,variant:"h6",noWrap:!0},n.a.createElement(Ce.a,{avatar:n.a.createElement(B.a,{alt:"user",src:L.selectedGroup.photoURL||Se.a}),title:L.selectedGroup.groupName})),n.a.createElement("div",{style:{marginRight:"10px",color:"lightblue"}},L.selectedGroup.member.length," Participants"),n.a.createElement("div",null,n.a.createElement(M.a,{title:"Share documents","aria-label":"add"},n.a.createElement(Xe.a,{size:"small",style:{marginRight:"8px"}},n.a.createElement("input",{accept:"image/*,video/*,application/pdf",className:a.input,id:"icon-button-file",type:"file",onChange:function(e){console.log(e.target.files[0]);var t={name:L.user.firstName+" "+L.user.lastName,photoURL:L.user.photoURL||null,sender:L.user.id,file:e.target.files[0],type:e.target.files[0].type,fileName:e.target.files[0].name,groupId:L.selectedGroup._id};console.log(L),Q.emit("fileupload",t)}}),n.a.createElement("label",{htmlFor:"icon-button-file"},n.a.createElement(P.a,{type:"file","aria-label":"upload picture",component:"span"},n.a.createElement(Ke.a,null))))),L.user.id===L.selectedGroup.owner&&n.a.createElement(M.a,{title:"Add member","aria-label":"add"},n.a.createElement(Xe.a,{size:"small",onClick:function(){k(!0)}},n.a.createElement(ht.a,null))),n.a.createElement(lt.a,{open:w,onClose:H,"aria-labelledby":"form-dialog-title"},n.a.createElement(dt.a,{id:"form-dialog-title"},"Search User"),n.a.createElement(mt.a,null,n.a.createElement(v.a,{autoFocus:!0,margin:"dense",id:"search",label:"Search",type:"text",fullWidth:!0,onChange:function(e){return t="searchQuery",a=e.target.value,void U(Object(h.a)(Object(h.a)({},L),{},Object(f.a)({},t,a)));var t,a}})),n.a.createElement(ut.a,null,n.a.createElement(x.a,{style:{margin:"10px 0"},container:!0,direction:"column"},L.searchQueryResult&&L.searchQueryResult.map((function(e){return n.a.createElement(x.a,{item:!0,key:e._id},n.a.createElement(M.a,{title:"click for send request","aria-label":"add",style:{cursor:"pointer"}},n.a.createElement(Re.a,{onClick:function(){return X(e._id)}},n.a.createElement(Ce.a,{avatar:n.a.createElement(B.a,{alt:"user",src:e.photoURL||Se.a}),title:e.firstName+" "+e.lastName}))))})))),n.a.createElement(ut.a,null,n.a.createElement(b.a,{onClick:H,color:"primary"},"Cancel"),n.a.createElement(b.a,{onClick:$,color:"primary"},"Search")))))),n.a.createElement("div",{className:"chat-box"},n.a.createElement(x.a,{className:"messages"},D&&n.a.createElement("div",{className:a.root1},n.a.createElement(Fe.a,null)),W&&W.map((function(e){return n.a.createElement(x.a,{item:!0,xs:12,key:e._id,style:{padding:"8px"},ref:t},n.a.createElement("div",{className:"message"},n.a.createElement(B.a,{className:"message-photo",src:e.phtoURL||Se.a,alt:"message"}),n.a.createElement("div",{className:"message-name"},e.name)),e.file?n.a.createElement(n.a.Fragment,null,-1!==(null===e||void 0===e?void 0:e.type.indexOf("video"))?n.a.createElement("video",{width:"320",height:"240",controls:!0,autoPlay:!0},n.a.createElement("source",{src:"/uploads/".concat(e.file),type:e.typetype})):-1!==(null===e||void 0===e?void 0:e.type.indexOf("image"))?n.a.createElement("img",{className:"message-file",src:"/uploads/".concat(e.file),alt:e.file}):n.a.createElement("div",{className:"message-content"},n.a.createElement("a",{className:"send-link",target:"_blank",rel:"noopener noreferrer",href:"/uploads/"+e.file},e.fileName||"open pdf"))):n.a.createElement("div",{className:"message-content"},e.message))}))),n.a.createElement("form",{className:"message-form",onSubmit:K},n.a.createElement(x.a,{container:!0},n.a.createElement(x.a,{item:!0,xs:1,sm:1},n.a.createElement("div",null,n.a.createElement(ke.a,{onClickAway:function(){i(!1)}},n.a.createElement("div",null,n.a.createElement(ct.a,{onClick:function(){i((function(e){return!e}))},style:{cursor:"pointer"}}),o?n.a.createElement(at.a,null,n.a.createElement("div",{className:a.dropdown},n.a.createElement(nt.a,{onEmojiClick:q}))):null)))),n.a.createElement(x.a,{item:!0,xs:9,sm:10},n.a.createElement(v.a,{fullWidth:!0,placeholder:"type a message ",name:"message",variant:"outlined",autoComplete:"off",size:"small",value:L.message,onChange:function(e){return U(Object(h.a)(Object(h.a)({},L),{},{message:e.target.value}))}})),n.a.createElement(x.a,{item:!0,xs:2,sm:1},n.a.createElement(Xe.a,{style:{width:"40px",height:"40px"},type:"submit"},n.a.createElement(et.a,null))))))):n.a.createElement("div",null,0===e.group.groups.length?n.a.createElement("h1",null,"you don't have any group."):n.a.createElement("h1",null,"Click on any group for chatting.")))):n.a.createElement("div",{className:a.root1},n.a.createElement(Fe.a,null)),n.a.createElement(Te.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:L.snackbarOpen,onClose:function(){U({snackbarOpen:!1})},autoHideDuration:3e3},n.a.createElement(Ge.a,{severity:L.snackbarSeverity,variant:"filled"},L.snackbarMessage)))})),Et=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={user:null,snackbarOpen:!1,snackbarMessage:"",snackbarSeverity:"success"},e.connect=function(){var t=Object(d.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.sendRequest({receiver:a,sender:e.props.userState.user.id});case 2:e.props.request.error?e.setState({snackbarOpen:!0,snackbarMessage:e.props.request.error,snackbarSeverity:"error"}):e.setState({snackbarOpen:!0,snackbarMessage:e.props.request.request.message});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showSnackbar=function(){return n.a.createElement(Te.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:e.state.snackbarOpen,onClose:function(){e.setState({snackbarOpen:!1})},autoHideDuration:3e3},n.a.createElement(Ge.a,{severity:e.state.snackbarSeverity,variant:"filled"},e.state.snackbarMessage))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.singleUser(this.props.match.params.id);case 2:return e.next=4,this.setState({user:this.props.userState.oneuser});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,a=this;return n.a.createElement("div",{style:{marginLeft:"100px"}},n.a.createElement(Ue,null),this.state.user?n.a.createElement(x.a,{container:!0},n.a.createElement(x.a,{item:!0,xs:12,sm:12,md:4},n.a.createElement("img",{height:"300px",width:"300px",alt:"user",src:this.state.user.photoURL||Se.a}),n.a.createElement("h1",null,"Name: ",this.state.user.firstName+" "+this.state.user.lastName),n.a.createElement("h2",null,"Email: ",this.state.user.email),n.a.createElement("h3",null,"Join date : ",new Date(this.state.user.createdAt).toLocaleDateString())),n.a.createElement(x.a,{item:!0,xs:12,sm:12,md:4},n.a.createElement(M.a,{title:"send Request","aria-label":"add"},n.a.createElement(b.a,{variant:"contained",color:"primary",size:"large",style:{marginLeft:"60px"},onClick:function(){return a.connect(a.state.user._id)}},"connect")),n.a.createElement("h1",null,"Friends"),null===(e=this.state.user)||void 0===e?void 0:e.friends.map((function(e){return n.a.createElement("div",{key:e._id},n.a.createElement(Re.a,{className:"friend"},n.a.createElement(Ce.a,{avatar:n.a.createElement(B.a,{alt:"user",src:e.photoURL||Se.a}),title:e.firstName+" "+e.lastName})))}))),n.a.createElement(x.a,{item:!0,xs:12,sm:12,md:4},n.a.createElement("div",null,n.a.createElement("h3",null,"last login date: ",new Date(this.state.user.updatedAt).toLocaleDateString())),n.a.createElement("h1",null,"Groups"),null===(t=this.state.user)||void 0===t?void 0:t.group.map((function(e){return n.a.createElement("div",{key:e._id},n.a.createElement(Re.a,{className:"friend"},n.a.createElement(Ce.a,{avatar:n.a.createElement(B.a,{alt:"user",src:e.photoURL||Se.a}),title:e.groupName})))})))):n.a.createElement("div",{className:"loader"},n.a.createElement(Fe.a,null)),this.showSnackbar())}}]),a}(r.Component),vt=Object(N.b)((function(e){return{userState:e.userState,request:e.requestReducer}}),{allUser:q,sendRequest:De,singleUser:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,R.a.defaults.withCredentials=!0,t.next=4,R()("/users/".concat(e));case 4:r=t.sent,n=r.data,a({type:"SINGLEUSER",payload:{oneuser:n}}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}})(Et),yt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(Ee.a,null,n.a.createElement(k.a,{path:"/",component:We,exact:!0}),n.a.createElement(k.a,{path:"/login",component:F,exact:!0}),n.a.createElement(k.a,{path:"/register",component:z,exact:!0}),n.a.createElement(k.a,{path:"/forgotPassword",component:$,exact:!0}),n.a.createElement(k.a,{path:"/Profile",component:Be,exact:!0}),n.a.createElement(k.a,{path:"/resetPassword/:email",component:Je,exact:!0}),n.a.createElement(k.a,{path:"/friend",component:it,exact:!0}),n.a.createElement(k.a,{path:"/group",component:bt,exact:!0}),n.a.createElement(k.a,{path:"/user/:id",component:vt})))}}]),a}(r.Component),xt=a(62),Ot={user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null,isAuthenticated:localStorage.getItem("isAuth")||!1,info:null,error:null,users:null,useremail:null,oneuser:null,search:null},jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"REGISTER":var n=Object.assign(e,r);return n;case"LOGIN":return r.user&&(localStorage.setItem("user",JSON.stringify(r.user)),localStorage.setItem("isAuth",!0)),Object.assign(e,r);case"LOGOUT":return localStorage.removeItem("user"),localStorage.removeItem("isAuth"),Object(h.a)(Object(h.a)({},e),{},{user:null,isAuthenticated:!1});case"ALLUSER":return Object.assign(e,r);case"FORGOTPASSWORD":var s=Object.assign(e,r);return s;case"UPDATEUSER":var c=Object(h.a)(Object(h.a)({},e.user),{},{photoURL:r.photoURL,firstName:r.firstName,lastName:r.lastName});return localStorage.setItem("user",JSON.stringify(c)),Object(h.a)(Object(h.a)({},e),{},{user:c});case"CHANGEPASSWORD":return r.user&&localStorage.setItem("user",JSON.stringify(r.user)),Object.assign(e,r);case"SINGLEUSER":return Object.assign(e,r);default:return e}},wt={request:null,error:null,requests:null,update:null,friends:null},kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"REQUEST":var n=Object.assign(e,r);return n;case"ALLREQUEST":case"UPDATEREQUEST":case"FRIENDS":return Object.assign(e,r);default:return e}},Nt=a(157),St={group:null,error:null,info:null,groups:null,searchQuery:null,message:null},Rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"CREATEGROUP":return Object(h.a)(Object(h.a)({},e),{},{group:r.group,error:r.error});case"FINDGROUP":return Object(h.a)(Object(h.a)({},e),{},{groups:r});case"SEARCHUSER":return Object.assign(e,r);case"ALLMESSAGE":return Object(h.a)(Object(h.a)({},e),{},{message:r});default:return e}},Ct={messages:[],singleMessages:[]},Lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"ALLMESSAGE":case"SINGLECHAT":return Object.assign(e,r);default:return e}},Ut=Object(xt.c)({userState:jt,requestReducer:kt,groupReducer:Rt,chatReducer:Lt}),qt=Object(xt.d)(Ut,Object(xt.a)(Nt.a));a(231);c.a.render(n.a.createElement(N.a,{store:qt},n.a.createElement(yt,null)),document.getElementById("root"))},58:function(e,t,a){e.exports=a.p+"static/media/ouricon.c1f7ad7e.jpg"}},[[170,1,2]]]);
//# sourceMappingURL=main.9ac46ce7.chunk.js.map